 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/lebanon-stability.html b/lebanon-stability.html
index bb575b8b803af81257c78c76356c4740ef69ea82..0b81c241249a414176b239d7497a744e990b674a 100644
--- a/lebanon-stability.html
+++ b/lebanon-stability.html
@@ -7,55 +7,75 @@
     <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
     <meta http-equiv="Pragma" content="no-cache">
     <meta http-equiv="Expires" content="0">
     <title>Lebanon Stability Index | Asifah Analytics v2.7.0</title>
     <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ‡±ðŸ‡§</text></svg>">
     <!-- Chart.js for sparklines -->
 <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
     
     <!-- Google Analytics (commented out - may be blocked by network) -->
     <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z9114D1Z5C"></script>
     <script>
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     gtag('config', 'G-Z9114D1Z5C');
     </script> -->
     
     <style>
         * {
             margin: 0;
             padding: 0;
             box-sizing: border-box;
         }
 
         body {
-            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
-            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a7b 100%);
-            color: #f0f4f8;
+            font-family: 'Times New Roman', Times, serif;
+            font-size: 14px;
+            background-color: #f5f5f5;
+            color: #2c3e50;
+            line-height: 1.6;
             padding: 20px;
             min-height: 100vh;
+            background-image: url('Asifah_Analytics_1_25_26_V1_LOGO.png');
+            background-position: center center;
+            background-repeat: no-repeat;
+            background-size: cover;
+            background-attachment: fixed;
+            opacity: 1;
+        }
+
+        body::before {
+            content: '';
+            position: fixed;
+            top: 0;
+            left: 0;
+            width: 100%;
+            height: 100%;
+            background-color: rgba(245, 245, 245, 0.75);
+            pointer-events: none;
+            z-index: -1;
         }
 
         /* NEW: Loading Overlay Styles */
         .loading-overlay {
             position: fixed;
             top: 0;
             left: 0;
             width: 100%;
             height: 100%;
             background: rgba(30, 58, 95, 0.95);
             backdrop-filter: blur(10px);
             display: flex;
             flex-direction: column;
             align-items: center;
             justify-content: center;
             z-index: 9999;
             transition: opacity 0.5s ease, visibility 0.5s ease;
         }
 
         .loading-overlay.hidden {
             opacity: 0;
             visibility: hidden;
         }
 
         .loading-spinner {
@@ -118,340 +138,353 @@
         .loading-progress {
             margin-top: 25px;
             font-size: 13px;
             color: #7a9ab8;
             font-style: italic;
         }
 
         .loading-error {
             color: #f87171;
             font-size: 16px;
             margin-top: 20px;
             padding: 15px;
             background: rgba(248, 113, 113, 0.1);
             border: 1px solid rgba(248, 113, 113, 0.3);
             border-radius: 8px;
         }
 
         .container {
             max-width: 1400px;
             margin: 0 auto;
         }
 
         header {
             text-align: center;
             margin-bottom: 30px;
+            background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
+            color: white;
+            padding: 35px;
+            border-radius: 12px;
+            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
+            position: relative;
         }
 
         h1 {
-            font-size: 2.5em;
+            font-size: 28px;
+            font-weight: bold;
             margin-bottom: 10px;
+            letter-spacing: 2px;
             color: #ffffff;
-            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
+            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
         }
 
         .subtitle {
             font-size: 1.1em;
-            color: #b8d4e8;
+            color: rgba(255,255,255,0.9);
             margin-bottom: 20px;
         }
 
         .last-updated {
             font-size: 0.9em;
-            color: #7a9ab8;
+            color: rgba(255,255,255,0.8);
             margin-top: 10px;
         }
 
         /* Stability Index Card */
         .stability-index-card {
-            background: rgba(255, 255, 255, 0.1);
-            backdrop-filter: blur(10px);
+            background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
             border-radius: 15px;
             padding: 30px;
             margin-bottom: 30px;
-            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
+            box-shadow: 0 8px 24px rgba(0,0,0,0.08);
+            border: 1px solid #e1e8ed;
         }
 
         .stability-title {
             font-size: 1.5em;
             margin-bottom: 20px;
             text-align: center;
-            color: #ffffff;
+            color: #2c3e50;
         }
 
         .stability-score {
             font-size: 5em;
             font-weight: bold;
             text-align: center;
             margin: 20px 0;
         }
 
         .stability-score.green { color: #4ade80; }
         .stability-score.yellow { color: #facc15; }
         .stability-score.orange { color: #fb923c; }
         .stability-score.red { color: #f87171; }
 
         .stability-label {
             text-align: center;
             font-size: 1.5em;
             margin-bottom: 10px;
             font-weight: 600;
         }
 
         .stability-label.green { color: #4ade80; }
         .stability-label.yellow { color: #facc15; }
         .stability-label.orange { color: #fb923c; }
         .stability-label.red { color: #f87171; }
 
         .stability-bar {
             width: 100%;
             height: 30px;
-            background: rgba(255,255,255,0.1);
+            background: #e5e7eb;
             border-radius: 15px;
             overflow: hidden;
             margin: 20px 0;
         }
 
         .stability-fill {
             height: 100%;
             background: linear-gradient(90deg, #f87171 0%, #fb923c 25%, #facc15 50%, #4ade80 100%);
             transition: width 0.5s ease;
             border-radius: 15px;
         }
 
         .stability-legend {
             text-align: center;
             font-size: 0.85em;
-            color: #b8d4e8;
+            color: #7f8c8d;
             font-style: italic;
         }
 
         /* Sparkline styles */
 .sparkline-container {
     margin-top: 15px;
     padding: 10px;
-    background: rgba(255, 255, 255, 0.05);
+    background: #f8f9fa;
     border-radius: 8px;
     display: flex;
     align-items: center;
     justify-content: space-between;
+    border: 1px solid #e1e8ed;
 }
 
 .sparkline-label {
     font-size: 0.75em;
-    color: #b8d4e8;
+    color: #7f8c8d;
     margin-right: 10px;
 }
 
 .sparkline-canvas {
     flex-grow: 1;
     max-width: 150px;
     height: 40px;
 }
 
 .sparkline-status {
     font-size: 0.75em;
-    color: #7a9ab8;
+    color: #95a5a6;
     font-style: italic;
 }
 
         /* Metrics Grid */
         .metrics-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
             gap: 20px;
             margin-bottom: 30px;
         }
 
         .metric-card {
-            background: rgba(255, 255, 255, 0.1);
-            backdrop-filter: blur(10px);
+            background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
             border-radius: 12px;
             padding: 20px;
-            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
+            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
             transition: transform 0.2s;
+            border: 1px solid #e1e8ed;
         }
 
         .metric-card:hover {
             transform: translateY(-5px);
         }
 
         .metric-title {
             font-size: 0.9em;
-            color: #b8d4e8;
+            color: #7f8c8d;
             text-transform: uppercase;
             letter-spacing: 1px;
             margin-bottom: 10px;
         }
 
         .metric-value {
             font-size: 2.5em;
             font-weight: bold;
-            color: #ffffff;
+            color: #2c3e50;
             margin-bottom: 5px;
         }
 
         .metric-subtitle {
             font-size: 0.85em;
-            color: #7a9ab8;
+            color: #7f8c8d;
         }
 
         /* Government Status */
         .government-status {
-            background: rgba(255, 255, 255, 0.05);
+            background: #f8f9fa;
             padding: 15px;
             border-radius: 8px;
             margin-top: 10px;
+            border: 1px solid #e1e8ed;
         }
 
         .government-status-item {
             display: flex;
             justify-content: space-between;
             padding: 8px 0;
-            border-bottom: 1px solid rgba(255,255,255,0.1);
+            border-bottom: 1px solid #e1e8ed;
         }
 
         .government-status-item:last-child {
             border-bottom: none;
         }
 
         .status-label {
-            color: #b8d4e8;
+            color: #7f8c8d;
             font-size: 0.9em;
         }
 
         .status-value {
-            color: #ffffff;
+            color: #2c3e50;
             font-weight: 600;
         }
 
         .status-value.warning {
             color: #fb923c;
         }
 
         .status-value.critical {
             color: #f87171;
         }
 
         /* Hezbollah Activity */
         .activity-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
             gap: 15px;
             margin-top: 15px;
         }
 
         .activity-item {
-            background: rgba(255,255,255,0.05);
+            background: #f8f9fa;
             padding: 15px;
             border-radius: 8px;
             text-align: center;
+            border: 1px solid #e1e8ed;
         }
 
         .activity-number {
             font-size: 2em;
             font-weight: bold;
-            color: #ffffff;
+            color: #2c3e50;
         }
 
         .activity-label {
             font-size: 0.85em;
-            color: #b8d4e8;
+            color: #7f8c8d;
             margin-top: 5px;
         }
 
         /* Articles Section */
         .articles-section {
-            background: rgba(255, 255, 255, 0.1);
-            backdrop-filter: blur(10px);
+            background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
             border-radius: 15px;
             padding: 25px;
             margin-top: 30px;
+            border: 1px solid #e1e8ed;
+            box-shadow: 0 6px 18px rgba(0,0,0,0.06);
         }
 
         .section-title {
             font-size: 1.5em;
             margin-bottom: 20px;
-            color: #ffffff;
+            color: #2c3e50;
         }
 
         .article-item {
-            background: rgba(255,255,255,0.05);
+            background: #f8f9fa;
             padding: 15px;
             border-radius: 8px;
             margin-bottom: 10px;
             transition: background 0.2s;
+            border: 1px solid #e1e8ed;
         }
 
         .article-item:hover {
-            background: rgba(255,255,255,0.1);
+            background: #eef2f6;
         }
 
         .article-title {
-            color: #ffffff;
+            color: #2c3e50;
             font-size: 1.05em;
             margin-bottom: 5px;
         }
 
         .article-meta {
             font-size: 0.85em;
-            color: #7a9ab8;
+            color: #7f8c8d;
         }
 
         .article-link {
             color: #6495ED;
             text-decoration: none;
             font-size: 0.9em;
         }
 
         .article-link:hover {
             text-decoration: underline;
         }
 
         /* Loading State */
         .loading {
             text-align: center;
             padding: 60px 20px;
         }
 
         .spinner {
             width: 50px;
             height: 50px;
             border: 4px solid rgba(255,255,255,0.1);
             border-top-color: #ffffff;
             border-radius: 50%;
             animation: spin 1s linear infinite;
             margin: 0 auto 20px;
         }
 
         /* Footer */
         footer {
             text-align: center;
             margin-top: 40px;
             padding: 20px;
             font-size: 0.85em;
-            color: #7a9ab8;
+            color: #7f8c8d;
         }
 
         .back-link {
             display: inline-block;
             margin-top: 20px;
             padding: 12px 24px;
             background: rgba(255,255,255,0.1);
             color: #ffffff;
             text-decoration: none;
             border-radius: 8px;
             transition: background 0.2s;
         }
 
         .back-link:hover {
             background: rgba(255,255,255,0.2);
         }
 
         /* Language Switcher */
         .language-switcher {
             position: absolute;
             top: 35px;
             right: 35px;
             display: flex;
             gap: 8px;
             background: rgba(255,255,255,0.15);
@@ -646,50 +679,52 @@
                 NewsAPI for aggregating news sources, GDELT for Arabic, Hebrew, and Farsi content. Reddit for community intelligence, plus other OSINT sources.
             </div>
            <div style="margin-top:15px;">For inquiries, contact: <a href="mailto:asifahanalytics@gmail.com" style="color:#6495ED;">asifahanalytics@gmail.com</a></div>
             
             <div style="margin-top:25px; padding:15px; background:rgba(255,255,255,0.05); border-radius:8px;">
                 <div style="font-size:0.9em; color:#b8d4e8; margin-bottom:8px;">Asifah Analytics v2.7.0</div>
                 <div style="font-size:0.8em; color:#7a9ab8;">Updated every 30 minutes | Not for operational use</div>
             </div>
 
             <div style="margin-top:20px; padding:15px; background:rgba(139,0,0,0.2); border-radius:8px;">
                 <span style="font-size:0.9em; color:#b8d4e8;">
                     If you find Asifah Analytics useful and want to support ongoing development, you can 
                     <a href="https://www.buymeacoffee.com/asifahanalytics" target="_blank" style="color:#6495ED;">â˜• buy me a coffee</a>
                 </span>
             </div>
 
             <div style="margin-top:25px; font-size:0.75em; color:#5a7a9a;">
                 Â© 2025 RCGG. All Rights Reserved. Proprietary and Confidential.<br>
                 Unauthorized use, reproduction, or distribution prohibited.
             </div>
         </footer>
     </div>
 
     <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
         const BACKEND_URL = 'https://asifah-backend.onrender.com';
+        const TREND_CACHE_KEY = 'lebanon-trends-cache-v1';
+        const TREND_CACHE_TTL = 30 * 60 * 1000;
 
         // NEW: Loading Overlay Management
         let loadingStepIndex = 0;
         let loadingInterval = null;
         let loadingTimeout = null;
 
         function startLoadingProgress() {
             const steps = ['step1', 'step2', 'step3', 'step4', 'step5'];
             
             // Progress through steps every 8 seconds
             loadingInterval = setInterval(() => {
                 if (loadingStepIndex < steps.length - 1) {
                     // Mark current step as complete
                     const currentStep = document.getElementById(steps[loadingStepIndex]);
                     if (currentStep) {
                         currentStep.classList.remove('active');
                         currentStep.classList.add('complete');
                         currentStep.querySelector('.step-icon').textContent = 'âœ“';
                     }
                     
                     // Move to next step
                     loadingStepIndex++;
                     const nextStep = document.getElementById(steps[loadingStepIndex]);
                     if (nextStep) {
                         nextStep.classList.add('active');
@@ -702,69 +737,121 @@
                 document.getElementById('loadingError').style.display = 'block';
             }, 60000);
         }
 
 function hideLoadingOverlay() {
     // Clear intervals
     if (loadingInterval) clearInterval(loadingInterval);
     if (loadingTimeout) clearTimeout(loadingTimeout);
     
     // Mark all steps as complete
     document.querySelectorAll('.loading-step').forEach(step => {
         step.classList.remove('active');
         step.classList.add('complete');
         step.querySelector('.step-icon').textContent = 'âœ“';
     });
     
     // Fade out overlay after brief delay
     setTimeout(() => {
         const overlay = document.getElementById('loadingOverlay');
         if (overlay) {
             overlay.classList.add('hidden');
         }
     }, 500);
 }
 
+function getCachedTrends() {
+    try {
+        const cached = JSON.parse(localStorage.getItem(TREND_CACHE_KEY));
+        if (!cached || !cached.timestamp || !cached.data) {
+            return null;
+        }
+        if (Date.now() - cached.timestamp > TREND_CACHE_TTL) {
+            return null;
+        }
+        return cached.data;
+    } catch (error) {
+        console.warn('Unable to read trend cache:', error);
+        return null;
+    }
+}
+
+function setCachedTrends(data) {
+    try {
+        localStorage.setItem(TREND_CACHE_KEY, JSON.stringify({
+            timestamp: Date.now(),
+            data
+        }));
+    } catch (error) {
+        console.warn('Unable to write trend cache:', error);
+    }
+}
+
+function applyTrendData(data) {
+    if (data.success && data.days_collected >= 3) {
+        createSparklines(data.trends);
+        return true;
+    }
+
+    if (data.success) {
+        document.getElementById('stabilitySparklineStatus').textContent =
+            `Building... (${data.days_collected}/3 days)`;
+
+        if (data.days_collected > 0) {
+            document.getElementById('stabilitySparklineContainer').style.display = 'flex';
+        }
+    }
+
+    return false;
+}
+
 // NEW: Fetch trend data for sparklines
 async function loadTrendData() {
+    const cachedData = getCachedTrends();
+    if (cachedData) {
+        const usedCache = applyTrendData(cachedData);
+        if (usedCache) {
+            return;
+        }
+    }
+
     try {
-        const response = await fetch(`${BACKEND_URL}/api/lebanon-trends?days=30`);
+        const response = await fetch(`${BACKEND_URL}/api/lebanon-trends?days=30`, {
+            cache: 'no-store'
+        });
         const data = await response.json();
-        
-        if (data.success && data.days_collected >= 3) {
-            createSparklines(data.trends);
-        } else {
-            document.getElementById('stabilitySparklineStatus').textContent = 
-                `Building... (${data.days_collected}/3 days)`;
-            
-            if (data.days_collected > 0) {
-                document.getElementById('stabilitySparklineContainer').style.display = 'flex';
-            }
+
+        if (data.success) {
+            setCachedTrends(data);
         }
+
+        applyTrendData(data);
     } catch (error) {
         console.error('Error loading trend data:', error);
-        document.getElementById('stabilitySparklineStatus').textContent = 'No trend data';
+        if (!cachedData) {
+            document.getElementById('stabilitySparklineStatus').textContent = 'No trend data';
+        }
     }
 }
 
         // NEW: Create sparkline charts
 function createSparklines(trends) {
     const commonOptions = {
         responsive: true,
         maintainAspectRatio: false,
         plugins: { legend: { display: false }, tooltip: { enabled: false } },
         scales: { x: { display: false }, y: { display: false } },
         elements: { point: { radius: 0 }, line: { tension: 0.4, borderWidth: 2 } }
     };
 
     // 1. Stability Sparkline
     if (trends.stability && trends.stability.length > 0) {
         const ctx = document.getElementById('stabilitySparkline');
         new Chart(ctx, {
             type: 'line',
             data: {
                 labels: trends.dates,
                 datasets: [{
                     data: trends.stability,
                     borderColor: '#6495ED',
                     backgroundColor: 'rgba(100, 149, 237, 0.1)',
                     fill: true
 
EOF
)
