<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z9114D1Z5C"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-Z9114D1Z5C');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asifah Analytics - Israeli Military Action Forecasting</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <!-- Favicon updated Feb 9, 2026 -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* CSS Variables for Light/Dark Mode */
:root {
    /* Light Mode Colors */
    --bg-color: #f5f5f5;
    --container-bg: #ffffff;
    --card-bg: #ffffff;
    --card-border: #e1e8ed;
    --text-primary: #2c3e50;
    --text-secondary: #7f8c8d;
    --text-muted: #95a5a6;
}

[data-theme="dark"] {
    /* Dark Mode Colors */
    --bg-color: #1a1a1a;
    --container-bg: #2d2d2d;
    --card-bg: #2d2d2d;
    --card-border: #404040;
    --text-primary: #e0e0e0;
    --text-secondary: #b0b0b0;
    --text-muted: #808080;
}
        
        body {
            font-family: 'Times New Roman', Times, serif;
            font-size: 14px;
            background-color: var(--bg-color);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease, direction 0.3s ease;
            line-height: 1.6;
            padding: 20px;
            transition: direction 0.3s ease;
            background-image: url('Asifah_Analytics_1_25_26_V1_LOGO.png');
            background-position: center center;
            background-repeat: no-repeat;
            background-size: cover;
            background-attachment: fixed;
            opacity: 1;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(245, 245, 245, 0.75);
            transition: background-color 0.3s ease;
            pointer-events: none;
            z-index: -1;
        }

        [data-theme="dark"] body::before {
    background-color: rgba(26, 26, 26, 0.85);
}

        [dir="rtl"] {
            direction: rtl;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
    background: linear-gradient(135deg, #1e3a5f 0%, #2c5282 100%);
    color: white;
    padding: 35px;
    border-radius: 12px;
    margin-bottom: 30px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.15);
    position: relative;
    min-height: 140px;
}

        .header-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
    padding-top: 10px;
}
        
        .header-logo {
    width: 80px;
    height: 80px;
    position: absolute;
    top: 35px;
    left: 35px;
    border-radius: 50%;
}

[dir="rtl"] .header-logo {
    left: auto;
    right: 35px;
}
        h1 {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            letter-spacing: 2px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }


        h2 {
            font-size: 16px;
            font-weight: normal;
            opacity: 0.95;
            letter-spacing: 0.5px;
        }

        .language-switcher {
            position: absolute;
            top: 35px;
            right: 35px;
            display: flex;
            gap: 8px;
            background: rgba(255,255,255,0.15);
            padding: 8px 12px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        [dir="rtl"] .language-switcher {
            right: auto;
            left: 35px;
        }

        /* Theme Toggle */
.theme-toggle {
    position: absolute;
    top: 90px;
    right: 35px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: rgba(255,255,255,0.15);
    padding: 8px 12px;
    border-radius: 8px;
    backdrop-filter: blur(10px);
}

[dir="rtl"] .theme-toggle {
    right: auto;
    left: 35px;
}

.theme-toggle-label {
    font-size: 11px;
    color: rgba(255,255,255,0.9);
    margin-right: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.theme-toggle-switch {
    position: relative;
    width: 50px;
    height: 26px;
    background: rgba(255,255,255,0.2);
    border-radius: 13px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid rgba(255,255,255,0.3);
}

.theme-toggle-switch:hover {
    background: rgba(255,255,255,0.3);
    border-color: rgba(255,255,255,0.5);
}

.theme-toggle-slider {
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    background: white;
    border-radius: 50%;
    transition: transform 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
}

.theme-toggle-slider::before {
    content: '‚òÄÔ∏è';
}

[data-theme="dark"] .theme-toggle-slider {
    transform: translateX(24px);
}

[data-theme="dark"] .theme-toggle-slider::before {
    content: 'üåô';
}

        .lang-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 14px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 14px;
            font-weight: bold;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .lang-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }

        .lang-btn.active {
            background: white;
            color: #1e3a5f;
            border-color: white;
        }

        .rate-limit-box {
            background: linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid #e1e8ed;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            transition: all 0.3s ease;
        }

        .rate-limit-box.warning {
            border-color: #f39c12;
            background: linear-gradient(to bottom, #fffaf0 0%, #fff5e6 100%);
            box-shadow: 0 4px 12px rgba(243, 156, 18, 0.15);
        }

        .rate-limit-box.danger {
            border-color: #c0392b;
            background: linear-gradient(to bottom, #fff5f5 0%, #ffe6e6 100%);
            box-shadow: 0 4px 12px rgba(192, 57, 43, 0.15);
            animation: gentle-pulse 3s ease-in-out infinite;
        }

        @keyframes gentle-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.01); }
        }

        .rate-limit-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }

        .rate-limit-label {
            font-size: 11px;
            text-transform: uppercase;
            color: #7f8c8d;
            margin-bottom: 8px;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .rate-limit-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }

        .rate-limit-value.warning {
            color: #f39c12;
        }

        .rate-limit-value.danger {
            color: #c0392b;
        }

        .rate-limit-value.success {
            color: #27ae60;
        }

        .card-scan-controls {
            background: linear-gradient(to bottom, #f8f9fa 0%, #ffffff 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid #e1e8ed;
        }

        .card-time-window {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .card-time-window label {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            font-size: 13px;
            transition: color 0.2s ease;
        }

        .card-time-window label:hover {
            color: #1e3a5f;
        }

        .card-time-window input[type="radio"] {
            margin-right: 6px;
            cursor: pointer;
        }

        [dir="rtl"] .card-time-window input[type="radio"] {
            margin-right: 0;
            margin-left: 6px;
        }

        .card-scan-button {
            background: linear-gradient(180deg, #34495e 0%, #2c3e50 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 14px;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.25);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
            width: 100%;
        }

        .card-scan-button:hover:not(:disabled) {
            background: linear-gradient(180deg, #2c3e50 0%, #1e3a5f 100%);
            box-shadow: 0 6px 16px rgba(0,0,0,0.35);
            transform: translateY(-2px);
        }

        .card-scan-button:active,
        .card-scan-button.scanning {
            transform: translateY(1px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .card-scan-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(180deg, #95a5a6 0%, #7f8c8d 100%);
        }

        .card-scan-button.scanning::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: scan-shimmer 1.5s infinite;
        }

        @keyframes scan-shimmer {
            to { left: 100%; }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 15px;
            font-style: italic;
            color: #7f8c8d;
            font-size: 13px;
        }

        .loading.active {
            display: block;
        }

        .loading-spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #1e3a5f;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        [dir="rtl"] .loading-spinner {
            margin-right: 0;
            margin-left: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 30px;
            margin-bottom: 35px;
            transition: opacity 0.3s ease;
        }

.target-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid #e1e8ed;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .target-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }
        .target-card.low-threat {
            background: linear-gradient(to bottom, #ffffff 0%, #f0f9f4 100%);
            border-color: #a3d9b1;
        }
        .target-card.medium-threat {
            background: linear-gradient(to bottom, #ffffff 0%, #fff9f0 100%);
            border-color: #f5c99d;
        }
        .target-card.high-threat {
            background: linear-gradient(to bottom, #ffffff 0%, #fff5f5 100%);
            border-color: #f5a9a3;
            animation: high-threat-pulse 3s ease-in-out infinite;
        }
        @keyframes high-threat-pulse {
            0%, 100% { 
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            }
            50% { 
                box-shadow: 0 4px 20px rgba(192, 57, 43, 0.25);
            }
        }
        #syria-card h3 {
            border-bottom-color: #8b5cf6;
        }
        #syria-card.low-threat {
            background: linear-gradient(to bottom, #ffffff 0%, #f5f3ff 100%);
            border-color: #c4b5fd;
        }
        #syria-card.medium-threat {
            background: linear-gradient(to bottom, #ffffff 0%, #faf5ff 100%);
            border-color: #d8b4fe;
        }
        #syria-card.high-threat {
            background: linear-gradient(to bottom, #ffffff 0%, #faf5ff 100%);
            border-color: #c084fc;
            animation: syria-threat-pulse 3s ease-in-out infinite;
        }
        @keyframes syria-threat-pulse {
            0%, 100% { 
                box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            }
            50% { 
                box-shadow: 0 4px 20px rgba(139, 92, 246, 0.25);
            }
        }

        /* ========================================= */
        /* COLLAPSIBLE CARD SYSTEM (NEW!)           */
        /* ========================================= */
        
        .target-card.collapsed {
            cursor: pointer;
            min-height: auto;
            padding: 20px;
        }

        .target-card.collapsed:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }

        .card-collapsed-view {
            display: block;
        }

        .target-card.collapsed .card-collapsed-view {
            display: block;
        }

        .target-card.collapsed .card-expanded-view {
            display: none;
        }

        .target-card.expanded .card-collapsed-view {
            display: none;
        }

        .target-card.expanded .card-expanded-view {
            display: block;
        }

        /* Collapsed Card Header */
        .collapsed-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .collapsed-title {
            font-size: 20px;
            font-weight: bold;
            color: #1e3a5f;
        }

        .collapse-toggle-btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .collapse-toggle-btn:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1e5a8a 100%);
            transform: translateY(-2px);
        }

        /* Collapsed Metric Display */
        .collapsed-metric {
            margin-bottom: 12px;
        }

        .collapsed-metric-label {
            font-size: 14px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .collapsed-metric-value {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .collapsed-percentage {
            font-size: 28px;
            font-weight: bold;
            color: #1e3a5f;
        }

        .collapsed-bar {
            flex: 1;
            height: 12px;
            background: #e5e7eb;
            border-radius: 6px;
            overflow: hidden;
            position: relative;
        }

        .collapsed-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%);
            border-radius: 6px;
            transition: width 0.6s ease;
        }

        /* Collapsed Timestamp */
        .collapsed-timestamp {
            font-size: 11px;
            color: #9ca3af;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .collapsed-timestamp::before {
            content: "üìÖ";
        }

        /* Expand Instructions */
        .expand-instructions {
            font-size: 12px;
            color: #6b7280;
            font-style: italic;
            margin-top: 8px;
        }

        .target-card h3 {
            font-size: 20px;
            font-weight: bold;
            color: #1e3a5f;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 3px solid #1e3a5f;
            padding-bottom: 12px;
            letter-spacing: 1px;
        }

        .protest-analytics-btn {
            display: block;
            width: fit-content;
            margin: 0 auto 20px;
            padding: 10px 24px;
            background: linear-gradient(180deg, #c0392b 0%, #a93226 100%);
            color: white;
            text-decoration: none;
            font-family: 'Times New Roman', Times, serif;
            font-size: 14px;
            font-weight: bold;
            border-radius: 6px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            text-align: center;
            letter-spacing: 0.5px;
            box-shadow: 0 3px 8px rgba(192, 57, 43, 0.3);
        }

        .protest-analytics-btn:hover {
            background: linear-gradient(180deg, #a93226 0%, #922b21 100%);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(192, 57, 43, 0.4);
        }

        .protest-analytics-btn::before {
            content: "üìä ";
        }

        .probability-display {
            text-align: center;
            margin-bottom: 25px;
            position: relative;
        }

        .probability-label {
            font-size: 13px;
            color: #7f8c8d;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .gauge-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 15px;
        }

        .gauge-svg {
            transform: rotate(-90deg);
        }

        .gauge-background {
            fill: none;
            stroke: #ecf0f1;
            stroke-width: 18;
        }

        .gauge-progress {
            fill: none;
            stroke-width: 18;
            stroke-linecap: round;
            transition: stroke-dasharray 1s ease-in-out, stroke 0.3s ease;
        }

        .gauge-progress.low {
            stroke: #27ae60;
        }

        .gauge-progress.medium {
            stroke: #f39c12;
        }

        .gauge-progress.high {
            stroke: #c0392b;
        }

        .gauge-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            color: #2c3e50;
        }

        .gauge-text.low {
            color: #27ae60;
        }

        .gauge-text.medium {
            color: #f39c12;
        }

        .gauge-text.high {
            color: #c0392b;
        }

        .timeline-display {
            margin-bottom: 25px;
            padding: 18px;
            background-color: #f8f9fa;
            border-radius: 10px;
            border: 1px solid #e1e8ed;
        }

        .timeline-label {
            font-size: 12px;
            color: #7f8c8d;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
            text-align: center;
        }

        .timeline-value {
            font-size: 15px;
            font-weight: bold;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 12px;
        }

        .timeline-bar {
            display: flex;
            height: 28px;
            border-radius: 8px;
            overflow: hidden;
            background-color: #e1e8ed;
            margin-top: 8px;
        }

        [dir="rtl"] .timeline-bar {
            flex-direction: row-reverse;
        }

        .timeline-segment {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: #7f8c8d;
            border-right: 2px solid white;
            transition: all 0.3s ease;
        }

        [dir="rtl"] .timeline-segment {
            border-right: none;
            border-left: 2px solid white;
        }

        .timeline-segment:last-child {
            border-right: none;
            border-left: none;
        }

        .timeline-segment.active {
            background-color: #1e3a5f;
            color: white;
            transform: scaleY(1.1);
        }

        .headlines-section {
            margin-top: 25px;
            max-height: 400px;
            overflow-y: auto;
            border-top: 2px solid #e1e8ed;
            padding-top: 18px;
        }

        .headlines-section::-webkit-scrollbar {
            width: 8px;
        }

        .headlines-section::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .headlines-section::-webkit-scrollbar-thumb {
            background: #bdc3c7;
            border-radius: 4px;
        }

        .headlines-section::-webkit-scrollbar-thumb:hover {
            background: #95a5a6;
        }

        .headlines-section h4 {
            font-size: 14px;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .headline-item {
            padding: 12px;
            margin-bottom: 12px;
            background-color: #f8f9fa;
            border-left: 4px solid #1e3a5f;
            border-radius: 6px;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        [dir="rtl"] .headline-item {
            border-left: none;
            border-right: 4px solid #1e3a5f;
        }

        .headline-item:hover {
            background-color: #e8f4f8;
            border-left-width: 6px;
            transform: translateX(4px);
        }

        [dir="rtl"] .headline-item:hover {
            border-left-width: 0;
            border-right-width: 6px;
            transform: translateX(-4px);
        }

        .headline-item .source {
            color: #7f8c8d;
            font-style: italic;
            font-size: 11px;
            margin-top: 6px;
        }

        .headline-item a {
            color: #2c3e50;
            text-decoration: none;
            font-weight: 500;
        }

        .headline-item a:hover {
            color: #1e3a5f;
            text-decoration: underline;
        }

        .article-weight-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 8px;
        }

        .article-weight-badge.high-impact {
            background-color: #c0392b;
            color: white;
        }

        .article-weight-badge.medium-impact {
            background-color: #f39c12;
            color: white;
        }

        .article-weight-badge.low-impact {
            background-color: #27ae60;
            color: white;
        }

        .article-contribution-bar {
            height: 6px;
            background-color: #ecf0f1;
            border-radius: 3px;
            margin-top: 6px;
            overflow: hidden;
        }

        .article-contribution-fill {
            height: 100%;
            background: linear-gradient(90deg, #c0392b 0%, #e74c3c 100%);
            transition: width 0.5s ease;
        }

        .article-contribution-fill.deescalation {
            background: linear-gradient(90deg, #27ae60 0%, #2ecc71 100%);
        }

        .article-scoring-details {
            font-size: 10px;
            color: #7f8c8d;
            margin-top: 6px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .article-scoring-details span {
            white-space: nowrap;
        }

        .polymarket-section {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid #7c3aed;
            overflow: hidden;
        }

        .polymarket-disclaimer {
            background-color: #fef3c7;
            border: 2px solid #f59e0b;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 12px;
            color: #92400e;
            text-align: center;
        }

        .polymarket-disclaimer strong {
            display: block;
            margin-bottom: 6px;
            font-size: 13px;
            color: #78350f;
        }

        .ticker-wrapper {
            position: relative;
            overflow: hidden;
            background: linear-gradient(to right, #f8f9fa, #ffffff, #f8f9fa);
            border-radius: 8px;
            padding: 15px 0;
            border: 1px solid #e1e8ed;
        }

        .ticker-content {
            display: flex;
            align-items: center;
            white-space: nowrap;
            gap: 28px;
            padding: 0 24px;
            animation: scroll-ticker 60s linear infinite;
            will-change: transform;
        }

        .ticker-wrapper:hover .ticker-content {
            animation-play-state: paused;
        }

        @keyframes scroll-ticker {
            0%   { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 8px 18px;
            border-radius: 999px;
            background: rgba(124, 58, 237, 0.06);
            border: 1px solid rgba(124, 58, 237, 0.18);
            font-size: 13px;
            color: #2c3e50;
        }

        .ticker-item strong {
            font-weight: bold;
        }

        .ticker-probability {
            font-weight: bold;
            color: #7c3aed;
        }

        .ticker-item a {
            color: #7c3aed;
            text-decoration: none;
            font-weight: bold;
        }

        .ticker-item a:hover {
            text-decoration: underline;
        }

        .ticker-loading {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-style: italic;
        }

        .ticker-error {
            text-align: center;
            padding: 15px;
            color: #c0392b;
            font-size: 13px;
        }

.flight-widget {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid #e74c3c;
        }

        .flight-widget-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .flight-widget-title {
            font-size: 17px;
            font-weight: bold;
            color: #c0392b;
            letter-spacing: 0.5px;
        }

        .flight-widget-title::before {
            content: "‚úàÔ∏è ";
            font-size: 20px;
            margin-right: 8px;
        }

        .flight-status-badge {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .flight-status-badge.normal {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }

        .flight-status-badge.active {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #f59e0b;
        }

        .flight-cancellations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }

        .cancellation-card {
            background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
            border: 2px solid #fecaca;
            border-radius: 10px;
            padding: 18px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .cancellation-card:hover {
            border-color: #f87171;
            transform: translateY(-4px);
            box-shadow: 0 6px 16px rgba(239, 68, 68, 0.15);
        }

        .cancellation-card.status-resumed {
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
            border-color: #bbf7d0;
        }

        .cancellation-card.status-resumed:hover {
            border-color: #86efac;
        }

        .cancellation-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        .airline-logo {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            object-fit: contain;
            background: white;
            padding: 4px;
            border: 1px solid #e5e7eb;
        }

        .cancellation-airline {
            font-size: 16px;
            font-weight: bold;
            color: #991b1b;
            flex: 1;
        }

        .status-resumed .cancellation-airline {
            color: #065f46;
        }

        .cancellation-status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .cancellation-status-badge.status-suspended {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        .cancellation-status-badge.status-cancelled {
            background: #fef2f2;
            color: #7f1d1d;
            border: 1px solid #fca5a5;
        }

        .cancellation-status-badge.status-resumed {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #a7f3d0;
        }

        .cancellation-route {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 12px;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 6px;
            border-left: 3px solid #ef4444;
        }

        .status-resumed .cancellation-route {
            border-left-color: #10b981;
        }

        .cancellation-details {
            font-size: 12px;
            color: #6b7280;
            line-height: 1.8;
        }

        .detail-row {
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .detail-row strong {
            color: #374151;
            min-width: 100px;
        }

        .source-link {
            color: #2563eb;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 4px;
        }

        .source-link:hover {
            color: #1d4ed8;
            text-decoration: underline;
        }

        .no-cancellations {
            text-align: center;
            padding: 30px;
            color: #6b7280;
            font-style: italic;
        }

        .no-cancellations::before {
            content: "‚úì";
            display: block;
            font-size: 48px;
            color: #10b981;
            margin-bottom: 10px;
        }

        [dir="rtl"] .flight-widget-title::before {
            margin-right: 0;
            margin-left: 8px;
        }

        /* Flight Expand/Collapse Button */
        .flight-expand-button {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            padding: 12px 24px;
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .flight-expand-button:hover {
            background: linear-gradient(135deg, #2980b9 0%, #1e5a8a 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(52, 152, 219, 0.4);
        }

        .flight-expand-button:active {
            transform: translateY(1px);
        }

        .cancellation-card.hidden-card {
            display: none;
        }

        /* NOTAM Widget */
.notam-widget {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin-bottom: 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    border: 2px solid #f59e0b;
}

.notam-widget {
    background: white;
    padding: 25px;
    border-radius: 12px;
    margin-top: 40px;        /* ADD THIS LINE */
    margin-bottom: 30px;
}

.notam-widget-title {
    font-size: 17px;
    font-weight: bold;
    color: #92400e;
    letter-spacing: 0.5px;
}

.notam-widget-title::before {
    content: "‚ö†Ô∏è ";
    font-size: 20px;
    margin-right: 8px;
}

.notam-status-badge {
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: bold;
    text-transform: uppercase;
    background: #fef3c7;
    color: #92400e;
    border: 1px solid #f59e0b;
}

.notam-scroll-container {
    position: relative;
    overflow: hidden;
    padding: 10px 0;
}

.notam-cards-wrapper {
    display: flex;
    gap: 20px;
    animation: scroll-notams 30s linear infinite;
    width: max-content;
}

.notam-cards-wrapper:hover {
    animation-play-state: paused;
}

@keyframes scroll-notams {
    0% {
        transform: translateX(0);
    }
    100% {
        transform: translateX(-50%);
    }
}

.notam-card {
    min-width: 320px;
    max-width: 320px;
    background: linear-gradient(135deg, #fffbeb 0%, #ffffff 100%);
    border: 2px solid #fde68a;
    border-radius: 10px;
    padding: 18px;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
}

.notam-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 16px rgba(245, 158, 11, 0.2);
}

/* Color variants for different NOTAM types */
.notam-card.type-red {
    background: linear-gradient(135deg, #fef2f2 0%, #ffffff 100%);
    border-color: #fecaca;
}

.notam-card.type-red:hover {
    border-color: #f87171;
    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.2);
}

.notam-card.type-orange {
    background: linear-gradient(135deg, #fff7ed 0%, #ffffff 100%);
    border-color: #fed7aa;
}

.notam-card.type-orange:hover {
    border-color: #fb923c;
    box-shadow: 0 6px 16px rgba(249, 115, 22, 0.2);
}

.notam-card.type-yellow {
    background: linear-gradient(135deg, #fefce8 0%, #ffffff 100%);
    border-color: #fef08a;
}

.notam-card.type-yellow:hover {
    border-color: #facc15;
    box-shadow: 0 6px 16px rgba(234, 179, 8, 0.2);
}

.notam-card.type-purple {
    background: linear-gradient(135deg, #faf5ff 0%, #ffffff 100%);
    border-color: #e9d5ff;
}

.notam-card.type-purple:hover {
    border-color: #c084fc;
    box-shadow: 0 6px 16px rgba(168, 85, 247, 0.2);
}

.notam-card.type-blue {
    background: linear-gradient(135deg, #eff6ff 0%, #ffffff 100%);
    border-color: #bfdbfe;
}

.notam-card.type-blue:hover {
    border-color: #60a5fa;
    box-shadow: 0 6px 16px rgba(59, 130, 246, 0.2);
}

.notam-card.type-gray {
    background: linear-gradient(135deg, #f9fafb 0%, #ffffff 100%);
    border-color: #e5e7eb;
}

.notam-card.type-gray:hover {
    border-color: #9ca3af;
    box-shadow: 0 6px 16px rgba(107, 114, 128, 0.2);
}

.notam-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

.notam-country {
    font-size: 15px;
    font-weight: bold;
    color: #374151;
    flex: 1;
}

.notam-type-badge {
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
    white-space: nowrap;
}

.notam-type-badge.type-red {
    background: #fee2e2;
    color: #991b1b;
    border: 1px solid #fecaca;
}

.notam-type-badge.type-orange {
    background: #ffedd5;
    color: #9a3412;
    border: 1px solid #fed7aa;
}

.notam-type-badge.type-yellow {
    background: #fef9c3;
    color: #854d0e;
    border: 1px solid #fef08a;
}

.notam-type-badge.type-purple {
    background: #f3e8ff;
    color: #6b21a8;
    border: 1px solid #e9d5ff;
}

.notam-type-badge.type-blue {
    background: #dbeafe;
    color: #1e40af;
    border: 1px solid #bfdbfe;
}

.notam-type-badge.type-gray {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid #e5e7eb;
}

.notam-summary {
    font-size: 13px;
    color: #4b5563;
    line-height: 1.6;
    margin-bottom: 12px;
    min-height: 60px;
}

.notam-details {
    font-size: 11px;
    color: #6b7280;
    line-height: 1.8;
}

.notam-detail-row {
    margin-bottom: 5px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.notam-detail-row strong {
    color: #374151;
    min-width: 70px;
}

.notam-link {
    color: #2563eb;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-top: 8px;
}

.notam-link:hover {
    color: #1d4ed8;
    text-decoration: underline;
}

.no-notams {
    text-align: center;
    padding: 40px 20px;
    color: #6b7280;
}

.no-notams::before {
    content: "‚úì";
    display: block;
    font-size: 48px;
    color: #10b981;
    margin-bottom: 15px;
}

.no-notams-title {
    font-size: 16px;
    font-weight: bold;
    color: #374151;
    margin-bottom: 8px;
}

.no-notams-subtitle {
    font-size: 13px;
    color: #9ca3af;
}
        
        footer {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            border: 2px solid #e1e8ed;
            font-size: 12px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 25px;
        }

        .footer-section {
            flex: 1;
            min-width: 250px;
        }

        .footer-section h4 {
            font-size: 13px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .disclaimer {
            background-color: #fff3cd;
            border: 2px solid #ffc107;
            padding: 18px;
            border-radius: 10px;
            margin-top: 25px;
            font-size: 12px;
            color: #856404;
        }

        .disclaimer strong {
            display: block;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .support-footer {
            margin-top: 40px;
            padding: 15px 20px;
            background: rgba(139, 92, 246, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 8px;
            text-align: center;
            font-size: 13px;
            color: #505050;
        }

        .support-footer a {
            color: #8b5cf6;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .support-footer a:hover {
            color: #7c3aed;
            text-decoration: underline;
        }

        .copyright-footer {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #606060;
            font-size: 11px;
        }

        .error-message {
            background-color: #f8d7da;
            border: 2px solid #f5c6cb;
            color: #721c24;
            padding: 18px;
            border-radius: 10px;
            margin: 20px 0;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        @media (max-width: 768px) {
    .dashboard {
        grid-template-columns: 1fr;
    }
    .rate-limit-box {
        justify-content: center;
    }
    
    /* MOBILE HEADER FIX - Stack everything vertically */
    header {
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
        min-height: auto;
    }
    
    /* Logo - center it, make it static */
    .header-logo {
        position: static;
        width: 60px;
        height: 60px;
        margin: 0 auto;
    }
    
    /* Header content - remove top padding */
    .header-content {
        padding-top: 0;
        text-align: center;
        max-width: 100%;
    }
    
    /* Smaller text on mobile */
    h1 {
        font-size: 20px;
        margin-bottom: 5px;
    }
    
    h2 {
        font-size: 14px;
    }
    
    /* Language switcher - stack below, center */
    .language-switcher {
        position: static;
        margin: 0;
        justify-content: center;
        width: 100%;
        max-width: 300px;
    }
    
    /* Theme toggle - stack below, center */
    .theme-toggle {
        position: static;
        width: 100%;
        max-width: 300px;
        justify-content: center;
    }
    
    .ticker-item {
        font-size: 12px;
        padding: 6px 15px;
    }
    
    .flight-cancellations-grid {
        grid-template-columns: 1fr;
    }
}

        .analytics-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 28px;
            opacity: 0.5;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            text-decoration: none;
            background: rgba(30, 58, 95, 0.9);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .analytics-button:hover {
            opacity: 1;
            transform: scale(1.15) rotate(15deg);
            box-shadow: 0 6px 20px rgba(30, 58, 95, 0.5);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .analytics-button img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
        }

        .threat-matrix-section {
            margin: 25px 0;
            padding: 20px;
            background: rgba(100, 149, 237, 0.05);
            border-radius: 12px;
            border: 2px solid rgba(100, 149, 237, 0.2);
        }

        .expand-matrix-button {
            width: 100%;
            background: linear-gradient(135deg, rgba(100, 149, 237, 0.2) 0%, rgba(100, 149, 237, 0.1) 100%);
            border: 2px solid rgba(100, 149, 237, 0.3);
            border-radius: 8px;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s;
            color: #2c3e50;
            font-weight: 600;
            font-size: 15px;
            text-align: center;
        }

        .expand-matrix-button:hover {
            background: linear-gradient(135deg, rgba(100, 149, 237, 0.3) 0%, rgba(100, 149, 237, 0.2) 100%);
            border-color: rgba(100, 149, 237, 0.5);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(100, 149, 237, 0.2);
        }

        .threat-matrix-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
            margin-top: 0;
        }

        .threat-matrix-details.show {
            max-height: 2500px;
            margin-top: 20px;
        }

        .combined-probability {
            margin-bottom: 25px;
        }

        .combined-value {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .combined-value.very-high { color: #ff6b6b; }
        .combined-value.high { color: #ff8c42; }
        .combined-value.moderate { color: #ffd93d; }
        .combined-value.low { color: #6bcf7f; }

        .probability-bar {
            width: 100%;
            height: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .probability-fill {
            height: 100%;
            transition: width 1s ease;
            border-radius: 15px;
        }

        .probability-fill.very-high { background: linear-gradient(90deg, #ff6b6b 0%, #c0392b 100%); }
        .probability-fill.high { background: linear-gradient(90deg, #ff8c42 0%, #e67e22 100%); }
        .probability-fill.moderate { background: linear-gradient(90deg, #ffd93d 0%, #f39c12 100%); }
        .probability-fill.low { background: linear-gradient(90deg, #6bcf7f 0%, #27ae60 100%); }

        .coordination-badge {
            display: inline-block;
            margin-top: 10px;
            padding: 6px 12px;
            background: rgba(100, 149, 237, 0.3);
            border-radius: 8px;
            font-size: 13px;
        }

        .threat-section {
            margin: 25px 0;
            padding: 20px;
            background: rgba(0,0,0,0.05);
            border-radius: 12px;
            border-left: 4px solid rgba(100, 149, 237, 0.6);
        }

        .section-title {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: #7a9ab8;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .threat-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }

        .threat-item:last-child {
            border-bottom: none;
        }

        .threat-actor {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            font-weight: 600;
        }

        .threat-probability {
            font-size: 24px;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .threat-mini-bar {
            width: 200px;
            height: 8px;
            background: rgba(0,0,0,0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-left: 15px;
        }

        .threat-mini-fill {
            height: 100%;
            transition: width 0.8s ease;
        }

        .risk-badge {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            min-width: 80px;
            text-align: center;
        }

        .risk-very-high { background: #ff6b6b; color: #fff; }
        .risk-high { background: #ff8c42; color: #fff; }
        .risk-moderate { background: #ffd93d; color: #2c3e50; }
        .risk-low { background: #6bcf7f; color: #fff; }

        .target-flag {
            font-size: 28px;
            margin-right: 8px;
        }

        /* ========================================
   OSINT FEED SIDEBAR
   ======================================== */
.osint-feed-container {
    background: rgba(30, 30, 40, 0.95);
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    margin-bottom: 30px;
}

.osint-feed-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.osint-feed-header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
    color: #ffffff;
}

.osint-feed-widget {
    width: 100%;
    border-radius: 5px;
    overflow: hidden;
}

.osint-feed-widget iframe {
    width: 100% !important;
    max-width: 100%;
    border: none;
    border-radius: 5px;
}

.osint-follow-button {
    display: block;
    width: 100%;
    padding: 12px;
    margin-top: 15px;
    background: linear-gradient(135deg, #E1306C, #C13584);
    color: white;
    text-align: center;
    text-decoration: none;
    border-radius: 6px;
    font-weight: 600;
    font-size: 14px;
    transition: all 0.3s ease;
}

.osint-follow-button:hover {
    background: linear-gradient(135deg, #C13584, #E1306C);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(225, 48, 108, 0.4);
}

/* Desktop Layout */
@media (min-width: 1200px) {
    .main-content-wrapper {
        display: grid;
        grid-template-columns: 320px 1fr;
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
    }
    
    .osint-sidebar {
        position: sticky;
        top: 120px;
        height: fit-content;
        order: -1; /* Force to left */
    }
}

/* Mobile Layout */
@media (max-width: 1199px) {
    .main-content-wrapper {
        display: block;
    }
    
    .osint-feed-widget iframe {
        height: 500px !important;
    }
}
        </style>
<header>
            <!-- Logo added here -->
            <img src="https://raw.githubusercontent.com/SassAndSweet/asifah-analytics/main/Asifah_Analytics_1_25_26_V1_LOGO.png" 
                 alt="Asifah Analytics Logo" 
                 class="header-logo">
            
            <div class="language-switcher">
                <button class="lang-btn active" onclick="switchLanguage('en', this)">EN</button>
                <button class="lang-btn" onclick="switchLanguage('he', this)">◊¢◊ë</button>
                <button class="lang-btn" onclick="switchLanguage('ar', this)">◊¢</button>
                <button class="lang-btn" onclick="switchLanguage('fa', this)">ŸÅÿß</button>
            </div>
            
            <!-- Theme toggle added here -->
            <div class="theme-toggle">
                <span class="theme-toggle-label" data-i18n="themeToggle">Toggle: Light - Dark</span>
                <div class="theme-toggle-switch" onclick="toggleTheme()">
                    <div class="theme-toggle-slider"></div>
                </div>
            </div>
            
            <!-- NEW: Wrap title/subtitle in container -->
            <div class="header-content">
                <h1 data-i18n="header">ASIFAH ANALYTICS</h1>
                <h2 data-i18n="subtitle">Regional Multi-Actor Conflict Probability Dashboard - The Middle East</h2>
            </div>
        </header>

        <div id="errorMessage" class="error-message"></div>

        <!-- Main Content Wrapper (Sidebar + Threat Cards) -->
<div class="main-content-wrapper">
    
    <!-- OSINT Feed Sidebar (LEFT SIDE) -->
    <aside class="osint-sidebar osint-left">
        <div class="osint-feed-container">
            <div class="osint-feed-header">
                <span style="font-size: 24px;">üì∏</span>
                <h3>OSINT FEED</h3>
            </div>
            
<div class="osint-feed-widget">
    <!-- SnapWidget -->
    <script src="https://snapwidget.com/js/snapwidget.js"></script>
    <iframe src="https://snapwidget.com/embed/1117696" class="snapwidget-widget" allowtransparency="true" frameborder="0" scrolling="no" style="border:none; overflow:hidden; border-radius:5px; width:100%; height:600px" title="Real-time OSINT + probability modeling for Middle East conflicts. Personal research project | Not affiliated with USG | Analysis ‚â† official position"></iframe>
</div>
            
            <a href="https://www.instagram.com/asifahanalytics/" target="_blank" class="osint-follow-button">
                üì∑ Follow @asifahanalytics ‚Üí
            </a>
        </div>
    </aside>
    
    <!-- Threat Cards Wrapper -->
    <div class="targets-grid">
<!-- IRAN CARD -->
<div class="target-card collapsed" id="iran-card" data-target="iran">
    
    <!-- COLLAPSED VIEW -->
    <div class="card-collapsed-view">
        <div class="collapsed-header">
            <div class="collapsed-title">üáÆüá∑ IRAN</div>
            <button class="collapse-toggle-btn" onclick="toggleCard('iran-card')">
                Expand ‚ñº
            </button>
        </div>
        
        <div class="collapsed-metric">
            <div class="collapsed-metric-label">Strike Probability</div>
            <div class="collapsed-metric-value">
                <div class="collapsed-percentage" id="iranCollapsedScore">--</div>
                <div class="collapsed-bar">
                    <div class="collapsed-bar-fill" id="iranCollapsedBar" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="collapsed-timestamp" id="iranCollapsedTimestamp">
            Loading...
        </div>
        
        <div class="expand-instructions">
            Click "Expand" to update data and view full analysis
        </div>
    </div>
    
    <!-- EXPANDED VIEW -->
    <div class="card-expanded-view">
        <h3><span class="target-flag">üáÆüá∑</span> <span data-i18n="targetIran">IRAN</span></h3>
        
        <button class="collapse-toggle-btn" onclick="toggleCard('iran-card')" style="margin-bottom: 15px; width: 100%;">
            Collapse ‚ñ≤
        </button>
        
        <a href="iran-protests.html" class="protest-analytics-btn" data-i18n="stabilityIndicators">üáÆüá∑ Iran Stability Indicators</a>
        
        <div class="card-scan-controls">
            <div class="card-time-window">
                <label><input type="radio" name="iran-timeWindow" value="1"> <span data-i18n="hours24">24 Hours</span></label>
                <label><input type="radio" name="iran-timeWindow" value="2"> <span data-i18n="hours48">48 Hours</span></label>
                <label><input type="radio" name="iran-timeWindow" value="7" checked> <span data-i18n="days7">7 Days</span></label>
                <label><input type="radio" name="iran-timeWindow" value="30"> <span data-i18n="days30">30 Days</span></label>
            </div>
            <button class="card-scan-button" onclick="scanSingleTarget('iran')">
                <span data-i18n="scanButtonIndividual">Scan OSINT - Update Forecast</span>
            </button>
            <div class="loading" id="iran-loading">
                <div class="loading-spinner"></div>
                <span data-i18n="loadingText">Scanning...</span>
            </div>
        </div>

        <div class="probability-display">
            <div class="probability-label" data-i18n="strikeProbability">Strike Probability</div>
            <div class="gauge-container">
                <svg class="gauge-svg" width="200" height="200" viewBox="0 0 200 200">
                    <circle class="gauge-background" cx="100" cy="100" r="85"></circle>
                    <circle class="gauge-progress medium" id="iran-gauge" cx="100" cy="100" r="85"
                        stroke-dasharray="0 534" stroke-dashoffset="0"></circle>
                </svg>
                <div class="gauge-text medium" id="iran-prob">--</div>
            </div>
        </div>
        
        <div class="timeline-display">
            <div class="timeline-label" data-i18n="projectedTimeline">Projected Timeline</div>
            <div class="timeline-value" id="iran-timeline" data-i18n="awaitingScan">Awaiting scan...</div>
            <div class="timeline-bar" id="iran-bar">
                <div class="timeline-segment"><span data-i18n="days030">0-30d</span></div>
                <div class="timeline-segment"><span data-i18n="days3190">31-90d</span></div>
                <div class="timeline-segment"><span data-i18n="days91180">91-180d</span></div>
                <div class="timeline-segment"><span data-i18n="days180plus">180+d</span></div>
            </div>
        </div>

        <div class="threat-matrix-section">
            <button class="expand-matrix-button" onclick="toggleThreatMatrix('iran')">
                <span class="expand-matrix-text">
                    üìä <span data-i18n="viewThreatMatrix">View Multi-Actor Threat Matrix</span> ‚ñº
                </span>
            </button>
            
            <div class="threat-matrix-details" id="iran-matrix-details">
                <div class="combined-probability">
                    <div class="section-title" data-i18n="combinedProbability">COMBINED STRIKE PROBABILITY</div>
                    <div class="combined-value" id="iran-combined-value">--</div>
                    <div class="probability-bar">
                        <div class="probability-fill" id="iran-combined-bar" style="width: 0%"></div>
                    </div>
                    <div class="coordination-badge" id="iran-coordination">
                        ‚ö° <span data-i18n="coordinationBonus">Coordination</span>: <span id="iran-coord-value">--</span>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="incomingThreats">INCOMING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáÆüá±</span>
                            <span data-i18n="israelStrike">Israel Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="iran-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="iran-israel-bar" style="width: 0%; background: #ff6b6b;"></div>
                            </div>
                            <span class="risk-badge" id="iran-israel-risk">--</span>
                        </div>
                    </div>

                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá∫üá∏</span>
                            <span data-i18n="usStrike">US Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="iran-us-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="iran-us-bar" style="width: 0%; background: #6495ED;"></div>
                            </div>
                            <span class="risk-badge" id="iran-us-risk">--</span>
                        </div>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="outgoingThreats">OUTGOING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáÆüá∑ ‚Üí üáÆüá±</span>
                            <span data-i18n="iranToIsrael">Iran ‚Üí Israel</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="iran-to-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="iran-to-israel-bar" style="width: 0%; background: #ffd93d;"></div>
                            </div>
                            <span class="risk-badge" id="iran-to-israel-risk">--</span>
                        </div>
                    </div>

                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáÆüá∑ ‚Üí üá∫üá∏</span>
                            <span data-i18n="iranToUS">Iran ‚Üí US</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="iran-to-us-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="iran-to-us-bar" style="width: 0%; background: #6bcf7f;"></div>
                            </div>
                            <span class="risk-badge" id="iran-to-us-risk">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="headlines-section" id="iran-headlines">
            <h4 data-i18n="recentHeadlines">Recent Headlines:</h4>
            <p style="color: #7f8c8d; font-style: italic;" data-i18n="clickToScan">Click scan to load latest intelligence</p>
        </div>
    </div>
</div>

<!-- HIZBALLAH CARD -->
<div class="target-card collapsed" id="hezbollah-card" data-target="hezbollah">
    
    <!-- COLLAPSED VIEW -->
    <div class="card-collapsed-view">
        <div class="collapsed-header">
            <div class="collapsed-title">üá±üáß HIZBALLAH (LEBANON)</div>
            <button class="collapse-toggle-btn" onclick="toggleCard('hezbollah-card')">
                Expand ‚ñº
            </button>
        </div>
        
        <div class="collapsed-metric">
            <div class="collapsed-metric-label">Strike Probability</div>
            <div class="collapsed-metric-value">
                <div class="collapsed-percentage" id="hezbollahCollapsedScore">--</div>
                <div class="collapsed-bar">
                    <div class="collapsed-bar-fill" id="hezbollahCollapsedBar" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="collapsed-timestamp" id="hezbollahCollapsedTimestamp">
            Loading...
        </div>
        
        <div class="expand-instructions">
            Click "Expand" to update data and view full analysis
        </div>
    </div>
    
    <!-- EXPANDED VIEW -->
    <div class="card-expanded-view">
        <h3><span class="target-flag">üá±üáß</span> <span data-i18n="targetHezbollah">HIZBALLAH (LEBANON)</span></h3>
        
        <button class="collapse-toggle-btn" onclick="toggleCard('hezbollah-card')" style="margin-bottom: 15px; width: 100%;">
            Collapse ‚ñ≤
        </button>
        
        <a href="lebanon-stability.html" class="protest-analytics-btn" data-i18n="stabilityIndicators">üá±üáß Lebanon Stability Indicators</a>
        
        <div class="card-scan-controls">
            <div class="card-time-window">
                <label><input type="radio" name="hezbollah-timeWindow" value="1"> <span data-i18n="hours24">24 Hours</span></label>
                <label><input type="radio" name="hezbollah-timeWindow" value="2"> <span data-i18n="hours48">48 Hours</span></label>
                <label><input type="radio" name="hezbollah-timeWindow" value="7" checked> <span data-i18n="days7">7 Days</span></label>
                <label><input type="radio" name="hezbollah-timeWindow" value="30"> <span data-i18n="days30">30 Days</span></label>
            </div>
            <button class="card-scan-button" onclick="scanSingleTarget('hezbollah')">
                <span data-i18n="scanButtonIndividual">Scan OSINT - Update Forecast</span>
            </button>
            <div class="loading" id="hezbollah-loading">
                <div class="loading-spinner"></div>
                <span data-i18n="loadingText">Scanning...</span>
            </div>
        </div>

        <div class="probability-display">
            <div class="probability-label" data-i18n="strikeProbability">Strike Probability</div>
            <div class="gauge-container">
                <svg class="gauge-svg" width="200" height="200" viewBox="0 0 200 200">
                    <circle class="gauge-background" cx="100" cy="100" r="85"></circle>
                    <circle class="gauge-progress medium" id="hezbollah-gauge" cx="100" cy="100" r="85"
                        stroke-dasharray="0 534" stroke-dashoffset="0"></circle>
                </svg>
                <div class="gauge-text medium" id="hezbollah-prob">--</div>
            </div>
        </div>
        
        <div class="timeline-display">
            <div class="timeline-label" data-i18n="projectedTimeline">Projected Timeline</div>
            <div class="timeline-value" id="hezbollah-timeline" data-i18n="awaitingScan">Awaiting scan...</div>
            <div class="timeline-bar" id="hezbollah-bar">
                <div class="timeline-segment"><span data-i18n="days030">0-30d</span></div>
                <div class="timeline-segment"><span data-i18n="days3190">31-90d</span></div>
                <div class="timeline-segment"><span data-i18n="days91180">91-180d</span></div>
                <div class="timeline-segment"><span data-i18n="days180plus">180+d</span></div>
            </div>
        </div>

        <div class="threat-matrix-section">
            <button class="expand-matrix-button" onclick="toggleThreatMatrix('hezbollah')">
                <span class="expand-matrix-text">
                    üìä <span data-i18n="viewThreatMatrix">View Multi-Actor Threat Matrix</span> ‚ñº
                </span>
            </button>
            
            <div class="threat-matrix-details" id="hezbollah-matrix-details">
                <div class="combined-probability">
                    <div class="section-title" data-i18n="combinedProbability">COMBINED STRIKE PROBABILITY</div>
                    <div class="combined-value" id="hezbollah-combined-value">--</div>
                    <div class="probability-bar">
                        <div class="probability-fill" id="hezbollah-combined-bar" style="width: 0%"></div>
                    </div>
                    <div class="coordination-badge" id="hezbollah-coordination">
                        ‚ö° <span data-i18n="coordinationBonus">Coordination</span>: <span id="hezbollah-coord-value">--</span>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="incomingThreats">INCOMING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáÆüá±</span>
                            <span data-i18n="israelStrike">Israel Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="hezbollah-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="hezbollah-israel-bar" style="width: 0%; background: #ff6b6b;"></div>
                            </div>
                            <span class="risk-badge" id="hezbollah-israel-risk">--</span>
                        </div>
                    </div>

                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá∫üá∏</span>
                            <span data-i18n="usStrike">US Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="hezbollah-us-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="hezbollah-us-bar" style="width: 0%; background: #6495ED;"></div>
                            </div>
                            <span class="risk-badge" id="hezbollah-us-risk">--</span>
                        </div>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="outgoingThreats">OUTGOING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá±üáß ‚Üí üáÆüá±</span>
                            <span data-i18n="hezbollahToIsrael">HIZBALLAH ‚Üí Israel</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="hezbollah-to-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="hezbollah-to-israel-bar" style="width: 0%; background: #ffd93d;"></div>
                            </div>
                            <span class="risk-badge" id="hezbollah-to-israel-risk">--</span>
                        </div>
                    </div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá±üáß ‚Üí üá∫üá∏</span>
                            <span data-i18n="hezbollahToUS">HIZBALLAH ‚Üí US</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="hezbollah-to-us-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="hezbollah-to-us-bar" style="width: 0%; background: #6bcf7f;"></div>
                            </div>
                            <span class="risk-badge" id="hezbollah-to-us-risk">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="headlines-section" id="hezbollah-headlines">
            <h4 data-i18n="recentHeadlines">Recent Headlines:</h4>
            <p style="color: #7f8c8d; font-style: italic;" data-i18n="clickToScan">Click scan to load latest intelligence</p>
        </div>
    </div>
</div>

<!-- HOUTHIS (YEMEN) CARD -->
<div class="target-card collapsed" id="houthis-card" data-target="houthis">
    
    <!-- COLLAPSED VIEW -->
    <div class="card-collapsed-view">
        <div class="collapsed-header">
            <div class="collapsed-title">üáæüá™ HOUTHIS (YEMEN)</div>
            <button class="collapse-toggle-btn" onclick="toggleCard('houthis-card')">
                Expand ‚ñº
            </button>
        </div>
        
        <div class="collapsed-metric">
            <div class="collapsed-metric-label">Strike Probability</div>
            <div class="collapsed-metric-value">
                <div class="collapsed-percentage" id="houthisCollapsedScore">--</div>
                <div class="collapsed-bar">
                    <div class="collapsed-bar-fill" id="houthisCollapsedBar" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="collapsed-timestamp" id="houthisCollapsedTimestamp">
            Loading...
        </div>
        
        <div class="expand-instructions">
            Click "Expand" to update data and view full analysis
        </div>
    </div>
    
    <!-- EXPANDED VIEW -->
    <div class="card-expanded-view">
        <h3><span class="target-flag">üáæüá™</span> <span data-i18n="targetHouthis">HOUTHIS (YEMEN)</span></h3>
        
        <button class="collapse-toggle-btn" onclick="toggleCard('houthis-card')" style="margin-bottom: 15px; width: 100%;">
            Collapse ‚ñ≤
        </button>
        
        <div class="card-scan-controls">
            <div class="card-time-window">
                <label><input type="radio" name="houthis-timeWindow" value="1"> <span data-i18n="hours24">24 Hours</span></label>
                <label><input type="radio" name="houthis-timeWindow" value="2"> <span data-i18n="hours48">48 Hours</span></label>
                <label><input type="radio" name="houthis-timeWindow" value="7" checked> <span data-i18n="days7">7 Days</span></label>
                <label><input type="radio" name="houthis-timeWindow" value="30"> <span data-i18n="days30">30 Days</span></label>
            </div>
            <button class="card-scan-button" onclick="scanSingleTarget('houthis')">
                <span data-i18n="scanButtonIndividual">Scan OSINT - Update Forecast</span>
            </button>
            <div class="loading" id="houthis-loading">
                <div class="loading-spinner"></div>
                <span data-i18n="loadingText">Scanning...</span>
            </div>
        </div>

        <div class="probability-display">
            <div class="probability-label" data-i18n="strikeProbability">Strike Probability</div>
            <div class="gauge-container">
                <svg class="gauge-svg" width="200" height="200" viewBox="0 0 200 200">
                    <circle class="gauge-background" cx="100" cy="100" r="85"></circle>
                    <circle class="gauge-progress medium" id="houthis-gauge" cx="100" cy="100" r="85"
                        stroke-dasharray="0 534" stroke-dashoffset="0"></circle>
                </svg>
                <div class="gauge-text medium" id="houthis-prob">--</div>
            </div>
        </div>
        
        <div class="timeline-display">
            <div class="timeline-label" data-i18n="projectedTimeline">Projected Timeline</div>
            <div class="timeline-value" id="houthis-timeline" data-i18n="awaitingScan">Awaiting scan...</div>
            <div class="timeline-bar" id="houthis-bar">
                <div class="timeline-segment"><span data-i18n="days030">0-30d</span></div>
                <div class="timeline-segment"><span data-i18n="days3190">31-90d</span></div>
                <div class="timeline-segment"><span data-i18n="days91180">91-180d</span></div>
                <div class="timeline-segment"><span data-i18n="days180plus">180+d</span></div>
            </div>
        </div>

        <div class="threat-matrix-section">
            <button class="expand-matrix-button" onclick="toggleThreatMatrix('houthis')">
                <span class="expand-matrix-text">
                    üìä <span data-i18n="viewThreatMatrix">View Multi-Actor Threat Matrix</span> ‚ñº
                </span>
            </button>
            
            <div class="threat-matrix-details" id="houthis-matrix-details">
                <div class="combined-probability">
                    <div class="section-title" data-i18n="combinedProbability">COMBINED STRIKE PROBABILITY</div>
                    <div class="combined-value" id="houthis-combined-value">--</div>
                    <div class="probability-bar">
                        <div class="probability-fill" id="houthis-combined-bar" style="width: 0%"></div>
                    </div>
                    <div class="coordination-badge" id="houthis-coordination">
                        ‚ö° <span data-i18n="coordinationBonus">Coordination</span>: <span id="houthis-coord-value">--</span>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="incomingThreats">INCOMING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáÆüá±</span>
                            <span data-i18n="israelStrike">Israel Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="houthis-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="houthis-israel-bar" style="width: 0%; background: #ff6b6b;"></div>
                            </div>
                            <span class="risk-badge" id="houthis-israel-risk">--</span>
                        </div>
                    </div>

                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá∫üá∏</span>
                            <span data-i18n="usStrike">US Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="houthis-us-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="houthis-us-bar" style="width: 0%; background: #6495ED;"></div>
                            </div>
                            <span class="risk-badge" id="houthis-us-risk">--</span>
                        </div>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="outgoingThreats">OUTGOING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáæüá™ ‚Üí üáÆüá±</span>
                            <span data-i18n="houthisToIsrael">HOUTHIS ‚Üí Israel</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="houthis-to-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="houthis-to-israel-bar" style="width: 0%; background: #ffd93d;"></div>
                            </div>
                            <span class="risk-badge" id="houthis-to-israel-risk">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="headlines-section" id="houthis-headlines">
            <h4 data-i18n="recentHeadlines">Recent Headlines:</h4>
            <p style="color: #7f8c8d; font-style: italic;" data-i18n="clickToScan">Click scan to load latest intelligence</p>
        </div>
    </div>
</div>

<!-- SYRIA CARD -->
<div class="target-card collapsed" id="syria-card" data-target="syria">
    
    <!-- COLLAPSED VIEW -->
    <div class="card-collapsed-view">
        <div class="collapsed-header">
            <div class="collapsed-title">üá∏üáæ SYRIA</div>
            <button class="collapse-toggle-btn" onclick="toggleCard('syria-card')">
                Expand ‚ñº
            </button>
        </div>
        
        <div class="collapsed-metric">
            <div class="collapsed-metric-label">Strike Probability</div>
            <div class="collapsed-metric-value">
                <div class="collapsed-percentage" id="syriaCollapsedScore">--</div>
                <div class="collapsed-bar">
                    <div class="collapsed-bar-fill" id="syriaCollapsedBar" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <div class="collapsed-timestamp" id="syriaCollapsedTimestamp">
            Loading...
        </div>
        
        <div class="expand-instructions">
            Click "Expand" to update data and view full analysis
        </div>
    </div>
    
    <!-- EXPANDED VIEW -->
    <div class="card-expanded-view">
        <h3><span class="target-flag">üá∏üáæ</span> <span data-i18n="targetSyria">SYRIA</span></h3>
        
        <button class="collapse-toggle-btn" onclick="toggleCard('syria-card')" style="margin-bottom: 15px; width: 100%;">
            Collapse ‚ñ≤
        </button>
        
        <a href="syria-conflicts.html" class="protest-analytics-btn" data-i18n="stabilityIndicators">üá∏üáæ Syria Stability Indicators</a>
        
        <div class="card-scan-controls">
            <div class="card-time-window">
                <label><input type="radio" name="syria-timeWindow" value="1"> <span data-i18n="hours24">24 Hours</span></label>
                <label><input type="radio" name="syria-timeWindow" value="2"> <span data-i18n="hours48">48 Hours</span></label>
                <label><input type="radio" name="syria-timeWindow" value="7" checked> <span data-i18n="days7">7 Days</span></label>
                <label><input type="radio" name="syria-timeWindow" value="30"> <span data-i18n="days30">30 Days</span></label>
            </div>
            <button class="card-scan-button" onclick="scanSingleTarget('syria')">
                <span data-i18n="scanButtonIndividual">Scan OSINT - Update Forecast</span>
            </button>
            <div class="loading" id="syria-loading">
                <div class="loading-spinner"></div>
                <span data-i18n="loadingText">Scanning...</span>
            </div>
        </div>

        <div class="probability-display">
            <div class="probability-label" data-i18n="strikeProbability">Strike Probability</div>
            <div class="gauge-container">
                <svg class="gauge-svg" width="200" height="200" viewBox="0 0 200 200">
                    <circle class="gauge-background" cx="100" cy="100" r="85"></circle>
                    <circle class="gauge-progress medium" id="syria-gauge" cx="100" cy="100" r="85"
                        stroke-dasharray="0 534" stroke-dashoffset="0"></circle>
                </svg>
                <div class="gauge-text medium" id="syria-prob">--</div>
            </div>
        </div>
        
        <div class="timeline-display">
            <div class="timeline-label" data-i18n="projectedTimeline">Projected Timeline</div>
            <div class="timeline-value" id="syria-timeline" data-i18n="awaitingScan">Awaiting scan...</div>
            <div class="timeline-bar" id="syria-bar">
                <div class="timeline-segment"><span data-i18n="days030">0-30d</span></div>
                <div class="timeline-segment"><span data-i18n="days3190">31-90d</span></div>
                <div class="timeline-segment"><span data-i18n="days91180">91-180d</span></div>
                <div class="timeline-segment"><span data-i18n="days180plus">180+d</span></div>
            </div>
        </div>

        <div class="threat-matrix-section">
            <button class="expand-matrix-button" onclick="toggleThreatMatrix('syria')">
                <span class="expand-matrix-text">
                    üìä <span data-i18n="viewThreatMatrix">View Multi-Actor Threat Matrix</span> ‚ñº
                </span>
            </button>
            
            <div class="threat-matrix-details" id="syria-matrix-details">
                <div class="combined-probability">
                    <div class="section-title" data-i18n="combinedProbability">COMBINED STRIKE PROBABILITY</div>
                    <div class="combined-value" id="syria-combined-value">--</div>
                    <div class="probability-bar">
                        <div class="probability-fill" id="syria-combined-bar" style="width: 0%"></div>
                    </div>
                    <div class="coordination-badge" id="syria-coordination">
                        ‚ö° <span data-i18n="coordinationBonus">Coordination</span>: <span id="syria-coord-value">--</span>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="incomingThreats">INCOMING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üáÆüá±</span>
                            <span data-i18n="israelStrike">Israel Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="syria-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="syria-israel-bar" style="width: 0%; background: #ff6b6b;"></div>
                            </div>
                            <span class="risk-badge" id="syria-israel-risk">--</span>
                        </div>
                    </div>

                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá∫üá∏</span>
                            <span data-i18n="usStrike">US Strike</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="syria-us-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="syria-us-bar" style="width: 0%; background: #6495ED;"></div>
                            </div>
                            <span class="risk-badge" id="syria-us-risk">--</span>
                        </div>
                    </div>
                </div>

                <div class="threat-section">
                    <div class="section-title" data-i18n="outgoingThreats">OUTGOING THREATS:</div>
                    
                    <div class="threat-item">
                        <div class="threat-actor">
                            <span>üá∏üáæ ‚Üí üáÆüá±</span>
                            <span data-i18n="syriaToIsrael">SYRIA ‚Üí Israel</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span class="threat-probability" id="syria-to-israel-prob">--</span>
                            <div class="threat-mini-bar">
                                <div class="threat-mini-fill" id="syria-to-israel-bar" style="width: 0%; background: #ffd93d;"></div>
                            </div>
                            <span class="risk-badge" id="syria-to-israel-risk">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="headlines-section" id="syria-headlines">
            <h4 data-i18n="recentHeadlines">Recent Headlines:</h4>
            <p style="color: #7f8c8d; font-style: italic;" data-i18n="clickToScan">Click scan to load latest intelligence</p>
        </div>
    </div>
</div>

</div><!-- End targets-grid -->
</div><!-- End main-content-wrapper -->

<!-- NOTAM Widget (above flights) -->
<div class="notam-widget" id="notamWidget">
    <div class="notam-widget-header">
        <div class="notam-widget-title" data-i18n="notamWidgetTitle">Active NOTAMs - Middle East</div>
        <div class="notam-status-badge" id="notamStatusBadge">
            <span>Loading...</span>
        </div>
    </div>
    
    <div class="notam-scroll-container" id="notamScrollContainer">
        <div class="notam-cards-wrapper" id="notamCardsWrapper">
            <!-- NOTAM cards will be inserted here -->
        </div>
    </div>
</div>

<!-- Flight widget OUTSIDE the grid wrapper -->
<div class="flight-widget" id="flightWidget">
    <div class="flight-widget-header">
        <div class="flight-widget-title" data-i18n="flightWidgetTitle">Flight Disruptions Monitor</div>
        <div class="flight-status-badge normal" id="flightStatusBadge">
            <span data-i18n="flightStatusNormal">All Routes Normal</span>
        </div>
    </div>
    
    <div class="flight-cancellations-grid" id="flightCancellationsGrid">
        <div class="no-cancellations" data-i18n="noFlightDisruptions">
            No major flight disruptions detected in target regions
        </div>
    </div>
    
    <!-- Expand/Collapse Button -->
    <button id="flightExpandButton" class="flight-expand-button" style="display: none;">
        Show 4 More ‚ñº
    </button>
</div>

        <div class="rate-limit-box" id="rateLimitBox">
            <div class="rate-limit-item">
                <div class="rate-limit-label" data-i18n="requestsUsedLabel">Requests Used</div>
                <div class="rate-limit-value" id="requestsUsed">--</div>
            </div>
            <div class="rate-limit-item">
                <div class="rate-limit-label" data-i18n="requestsRemainingLabel">Requests Remaining</div>
                <div class="rate-limit-value success" id="requestsRemaining">--</div>
            </div>
            <div class="rate-limit-item">
                <div class="rate-limit-label" data-i18n="dailyLimitLabel">Daily Limit</div>
                <div class="rate-limit-value" id="requestsLimit">100</div>
            </div>
            <div class="rate-limit-item">
                <div class="rate-limit-label" data-i18n="resetsInLabel">Quota Resets In</div>
                <div class="rate-limit-value" id="resetCountdown">--</div>
            </div>
        </div>

<footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h4 data-i18n="dataSourcesLabel">Data Sources:</h4>
                    <span data-i18n="dataSourcesText">NewsAPI for aggregating news sources, GDELT for Arabic, Hebrew, and Farsi content, Reddit for community intelligence, Polymarket for crowdsourced prediction market data, plus other OSINT sources. For inquiries, contact: asifahanalytics@gmail.com</span>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="methodologyLabel">Methodology:</h4>
                    <span data-i18n="methodologyText">Keyword-based analysis with escalation indicators including military action terms, diplomatic language, and threat assessments across multiple languages</span>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="lastUpdatedLabel">Last Updated:</h4>
                    <span id="lastUpdatedValue" data-i18n="notYetScanned">Not yet scanned</span>
                </div>
            </div>
            
            <div class="support-footer">
                <p>
                    If you find Asifah Analytics useful and want to support ongoing development, you can 
                    <a href="https://buymeacoffee.com/asifahanalytics" target="_blank" rel="noopener noreferrer">
                        ‚òï buy me a coffee
                    </a>
                </p>
            </div>
            
            <div class="disclaimer">
                <strong data-i18n="disclaimerTitle">‚ö†Ô∏è DISCLAIMER:</strong>
                <span data-i18n="disclaimerText">This dashboard is an analytical tool for educational and research purposes only. Probabilities are based on open-source news aggregation and simple keyword analysis. This tool does not represent official U.S. government assessments or policy positions. Users should consult official intelligence sources for operational decision-making.</span>
            </div>

            <div class="copyright-footer">
                <a href="privacy.html" style="color: #3498db; text-decoration: none; margin-right: 15px;">Privacy Policy</a> | 
                <a href="mailto:asifahanalytics@gmail.com" style="color: #3498db; text-decoration: none; margin-left: 15px;">Contact</a>
                <br><br>
                ¬© 2025 RCGG. All Rights Reserved. Proprietary and Confidential.<br>
                Unauthorized use, reproduction, or distribution prohibited.
            </div>
        </footer>
    </div>

    <!-- Google Analytics Button -->
    <a href="https://analytics.google.com/analytics/web/#/a381040543p520396736/reports/intelligenthome" 
       target="_blank" 
       class="analytics-button" 
       title="View Analytics">
        <img src="https://raw.githubusercontent.com/SassAndSweet/asifah-analytics/main/Asifah_Analytics_1_25_26_V1_LOGO.png" 
             alt="Analytics">
    </a>

    <audio id="clickSound">
        <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=" type="audio/wav">
    </audio>

    <script>
        const BACKEND_URL = 'https://asifah-backend.onrender.com';

    // Theme Management
    function initTheme() {
        const savedTheme = localStorage.getItem('asifah-theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
    }

    function toggleTheme() {
        const currentTheme = document.documentElement.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('asifah-theme', newTheme);
    }

    // Initialize theme on page load
    initTheme();

const translations = {
            en: {
                // Header
                header: "ASIFAH ANALYTICS",
                subtitle: "Regional Multi-Actor Conflict Probability Dashboard - The Middle East",
                themeToggle: "Toggle: Light - Dark",  
                
                // Target Names
                targetHezbollah: "HIZBALLAH",
                targetIran: "IRAN",
                targetHouthis: "HOUTHIS (YEMEN)",
                targetSyria: "SYRIA",
                
                // Time Window Options
                hours24: "24 Hours",
                hours48: "48 Hours",
                days7: "7 Days",
                days30: "30 Days",
                
                // Buttons
                scanButtonIndividual: "Scan OSINT - Update Forecast",
                stabilityIndicators: "Stability Indicators",
                
                // Loading States
                loadingText: "Scanning...",
                
                // Probability Display
                strikeProbability: "Strike Probability",
                projectedTimeline: "Projected Timeline",
                awaitingScan: "Awaiting scan...",
                
                // Timeline Segments
                days030: "0-30d",
                days3190: "31-90d",
                days91180: "91-180d",
                days180plus: "180+d",
                
                // Headlines Section
                recentHeadlines: "Recent Headlines:",
                clickToScan: "Click scan to load latest intelligence",
                noActionable: "No actionable headlines found (no threat indicators detected)",
                
                // Threat Matrix
                viewThreatMatrix: "View Multi-Actor Threat Matrix",
                hideThreatMatrix: "Hide Multi-Actor Threat Matrix",
                combinedProbability: "COMBINED STRIKE PROBABILITY",
                incomingThreats: "INCOMING THREATS",
                outgoingThreats: "OUTGOING THREATS",
                coordinationBonus: "Coordination Factor",
                
                // Threat Actors
                israelStrike: "Israel Strike",
                usStrike: "US Strike",
                iranToIsrael: "Iran ‚Üí Israel",
                iranToUS: "Iran ‚Üí US",
                hezbollahToIsrael: "Hezbollah ‚Üí Israel",
                hezbollahToUS: "Hezbollah ‚Üí US",
                houthisToIsrael: "Houthis ‚Üí Israel",
                syriaToIsrael: "Syria ‚Üí Israel",
                
                // Risk Levels
                riskLow: "Low",
                riskModerate: "Moderate",
                riskHigh: "High",
                riskVeryHigh: "Very High",
                
                // Polymarket Section
                polymarketDisclaimerTitle: "‚ö†Ô∏è MARKET PREDICTIONS DISCLAIMER",
                polymarketDisclaimerText: "Polymarket data represents betting market probabilities (crowd-sourced predictions). This is supplementary data only and does not constitute intelligence assessment or analytical tradecraft.",
                
                // Flight Widget
                flightWidgetTitle: "Flight Disruptions Monitor",
                flightStatusNormal: "All Routes Normal",
                flightStatusActive: "Active Disruptions",
                noFlightDisruptions: "No major flight disruptions detected in target regions",
                
                // Rate Limit Box
                requestsUsedLabel: "Requests Used",
                requestsRemainingLabel: "Requests Remaining",
                dailyLimitLabel: "Daily Limit",
                resetsInLabel: "Quota Resets In",
                
                // Footer
                dataSourcesLabel: "Data Sources:",
                dataSourcesText: "NewsAPI for aggregating news sources, GDELT for Arabic, Hebrew, and Farsi content, Reddit for community intelligence, Polymarket for crowdsourced prediction market data, plus other OSINT sources. For inquiries, contact: asifahanalytics@gmail.com",
                methodologyLabel: "Methodology:",
                methodologyText: "Keyword-based analysis with escalation indicators including military action terms, diplomatic language, and threat assessments across multiple languages",
                lastUpdatedLabel: "Last Updated:",
                notYetScanned: "Not yet scanned",
                disclaimerTitle: "‚ö†Ô∏è DISCLAIMER:",
                disclaimerText: "This dashboard is an analytical tool for educational and research purposes only. Probabilities are based on open-source news aggregation and simple keyword analysis. This tool does not represent official U.S. government assessments or policy positions. Users should consult official intelligence sources for operational decision-making.",
            },
            
            he: {
                // Header
                header: "◊ê◊°◊ô◊§◊î ◊ê◊†◊ú◊ô◊ò◊ô◊ß◊°",
                subtitle: "◊ú◊ï◊ó ◊û◊ó◊ï◊ï◊†◊ô◊ù ◊ê◊ñ◊ï◊®◊ô ◊ú◊î◊°◊™◊ë◊®◊ï◊™ ◊°◊õ◊°◊ï◊õ◊ô◊ù ◊®◊ë-◊©◊ó◊ß◊†◊ô◊ù - ◊î◊û◊ñ◊®◊ó ◊î◊™◊ô◊õ◊ï◊ü",
                themeToggle: "◊û◊¢◊ë◊®: ◊ë◊î◊ô◊® - ◊õ◊î◊î", 
                
                // Target Names
                targetHezbollah: "◊ó◊ô◊ñ◊ë◊ê◊ú◊ú◊î",
                targetIran: "◊ê◊ô◊®◊ê◊ü",
                targetHouthis: "◊ó◊ï◊™'◊ô◊ù (◊™◊ô◊û◊ü)",
                targetSyria: "◊°◊ï◊®◊ô◊î",
                
                // Time Window Options
                hours24: "24 ◊©◊¢◊ï◊™",
                hours48: "48 ◊©◊¢◊ï◊™",
                days7: "7 ◊ô◊û◊ô◊ù",
                days30: "30 ◊ô◊û◊ô◊ù",
                
                // Buttons
                scanButtonIndividual: "◊°◊®◊ï◊ß OSINT - ◊¢◊ì◊õ◊ü ◊™◊ó◊ñ◊ô◊™",
                stabilityIndicators: "◊û◊ì◊ì◊ô ◊ô◊¶◊ô◊ë◊ï◊™",
                
                // Loading States
                loadingText: "◊°◊ï◊®◊ß...",
                
                // Probability Display
                strikeProbability: "◊î◊°◊™◊ë◊®◊ï◊™ ◊™◊ß◊ô◊§◊î",
                projectedTimeline: "◊¶◊ô◊® ◊ñ◊û◊ü ◊¶◊§◊ï◊ô",
                awaitingScan: "◊û◊û◊™◊ô◊ü ◊ú◊°◊®◊ô◊ß◊î...",
                
                // Timeline Segments
                days030: "0-30 ◊ô◊û◊ô◊ù",
                days3190: "31-90 ◊ô◊û◊ô◊ù",
                days91180: "91-180 ◊ô◊û◊ô◊ù",
                days180plus: "180+ ◊ô◊û◊ô◊ù",
                
                // Headlines Section
                recentHeadlines: "◊õ◊ï◊™◊®◊ï◊™ ◊¢◊ì◊õ◊†◊ô◊ï◊™:",
                clickToScan: "◊ú◊ó◊• ◊°◊®◊ï◊ß ◊ú◊ò◊¢◊ô◊†◊™ ◊û◊ï◊ì◊ô◊¢◊ô◊ü ◊¢◊ì◊õ◊†◊ô",
                noActionable: "◊ú◊ê ◊†◊û◊¶◊ê◊ï ◊õ◊ï◊™◊®◊ï◊™ ◊§◊¢◊ï◊ú◊î (◊ú◊ê ◊ñ◊ï◊î◊ï ◊ê◊ô◊†◊ì◊ô◊ß◊ò◊ï◊®◊ô◊ù ◊ú◊ê◊ô◊ï◊ù)",
                
                // Threat Matrix
                viewThreatMatrix: "◊î◊¶◊í ◊û◊ò◊®◊ô◊¶◊™ ◊ê◊ô◊ï◊û◊ô◊ù ◊®◊ë-◊©◊ó◊ß◊†◊ô◊ù",
                hideThreatMatrix: "◊î◊°◊™◊® ◊û◊ò◊®◊ô◊¶◊™ ◊ê◊ô◊ï◊û◊ô◊ù",
                combinedProbability: "◊î◊°◊™◊ë◊®◊ï◊™ ◊™◊ß◊ô◊§◊î ◊û◊©◊ï◊ú◊ë◊™",
                incomingThreats: "◊ê◊ô◊ï◊û◊ô◊ù ◊†◊õ◊†◊°◊ô◊ù",
                outgoingThreats: "◊ê◊ô◊ï◊û◊ô◊ù ◊ô◊ï◊¶◊ê◊ô◊ù",
                coordinationBonus: "◊í◊ï◊®◊ù ◊™◊ô◊ê◊ï◊ù",
                
                // Threat Actors
                israelStrike: "◊™◊ß◊ô◊§◊î ◊ô◊©◊®◊ê◊ú◊ô◊™",
                usStrike: "◊™◊ß◊ô◊§◊î ◊ê◊û◊®◊ô◊ß◊ê◊ô◊™",
                iranToIsrael: "◊ê◊ô◊®◊ê◊ü ‚Üí ◊ô◊©◊®◊ê◊ú",
                iranToUS: "◊ê◊ô◊®◊ê◊ü ‚Üí ◊ê◊®◊î\"◊ë",
                hezbollahToIsrael: "◊ó◊ô◊ñ◊ë◊ê◊ú◊ú◊î ‚Üí ◊ô◊©◊®◊ê◊ú",
                hezbollahToUS: "◊ó◊ô◊ñ◊ë◊ê◊ú◊ú◊î ‚Üí ◊ê◊®◊î\"◊ë",
                houthisToIsrael: "◊ó◊ï◊™'◊ô◊ù ‚Üí ◊ô◊©◊®◊ê◊ú",
                syriaToIsrael: "◊°◊ï◊®◊ô◊î ‚Üí ◊ô◊©◊®◊ê◊ú",
                
                // Risk Levels
                riskLow: "◊†◊û◊ï◊ö",
                riskModerate: "◊ë◊ô◊†◊ï◊†◊ô",
                riskHigh: "◊í◊ë◊ï◊î",
                riskVeryHigh: "◊í◊ë◊ï◊î ◊û◊ê◊ï◊ì",
                
                // Polymarket Section
                polymarketDisclaimerTitle: "‚ö†Ô∏è ◊ê◊ñ◊î◊®◊™ ◊™◊ó◊ñ◊ô◊ï◊™ ◊©◊ï◊ß",
                polymarketDisclaimerText: "◊†◊™◊ï◊†◊ô Polymarket ◊û◊ô◊ô◊¶◊í◊ô◊ù ◊î◊°◊™◊ë◊®◊ï◊ô◊ï◊™ ◊©◊ï◊ß ◊î◊ô◊û◊ï◊®◊ô◊ù (◊™◊ó◊ñ◊ô◊ï◊™ ◊û◊ë◊ï◊°◊°◊ï◊™ ◊ß◊î◊ú). ◊ñ◊î◊ï ◊û◊ô◊ì◊¢ ◊û◊©◊ú◊ô◊ù ◊ë◊ú◊ë◊ì ◊ï◊ê◊ô◊†◊ï ◊û◊î◊ï◊ï◊î ◊î◊¢◊®◊õ◊™ ◊û◊ï◊ì◊ô◊¢◊ô◊ü ◊ê◊ï ◊û◊ú◊ê◊õ◊î ◊ê◊†◊ú◊ô◊ò◊ô◊™.",
                
                // Flight Widget
                flightWidgetTitle: "◊û◊ï◊†◊ô◊ò◊ï◊® ◊î◊§◊®◊¢◊ï◊™ ◊ò◊ô◊°◊î",
                flightStatusNormal: "◊õ◊ú ◊î◊ß◊ï◊ï◊ô◊ù ◊™◊ß◊ô◊†◊ô◊ù",
                flightStatusActive: "◊î◊§◊®◊¢◊ï◊™ ◊§◊¢◊ô◊ú◊ï◊™",
                noFlightDisruptions: "◊ú◊ê ◊ñ◊ï◊î◊ï ◊î◊§◊®◊¢◊ï◊™ ◊ò◊ô◊°◊î ◊û◊©◊û◊¢◊ï◊™◊ô◊ï◊™ ◊ë◊ê◊ñ◊ï◊®◊ô ◊ô◊¢◊ì",
                
                // Rate Limit Box
                requestsUsedLabel: "◊ë◊ß◊©◊ï◊™ ◊ë◊©◊ô◊û◊ï◊©",
                requestsRemainingLabel: "◊ë◊ß◊©◊ï◊™ ◊†◊ï◊™◊®◊ï",
                dailyLimitLabel: "◊û◊í◊ë◊ú◊î ◊ô◊ï◊û◊ô◊™",
                resetsInLabel: "◊ê◊ô◊§◊ï◊° ◊û◊õ◊°◊î ◊ë◊¢◊ï◊ì",
                
                // Footer
                dataSourcesLabel: "◊û◊ß◊ï◊®◊ï◊™ ◊û◊ô◊ì◊¢:",
                dataSourcesText: "NewsAPI ◊ú◊ê◊ô◊°◊ï◊£ ◊û◊ß◊ï◊®◊ï◊™ ◊ó◊ì◊©◊ï◊™, GDELT ◊ú◊™◊ï◊õ◊ü ◊ë◊¢◊®◊ë◊ô◊™, ◊¢◊ë◊®◊ô◊™ ◊ï◊§◊®◊°◊ô◊™, Reddit ◊ú◊û◊ï◊ì◊ô◊¢◊ô◊ü ◊ß◊î◊ô◊ú◊™◊ô, Polymarket ◊ú◊†◊™◊ï◊†◊ô ◊©◊ï◊ß ◊™◊ó◊ñ◊ô◊ï◊™, ◊ï◊û◊ß◊ï◊®◊ï◊™ OSINT ◊†◊ï◊°◊§◊ô◊ù. ◊ú◊§◊†◊ô◊ï◊™: asifahanalytics@gmail.com",
                methodologyLabel: "◊û◊™◊ï◊ì◊ï◊ú◊ï◊í◊ô◊î:",
                methodologyText: "◊†◊ô◊™◊ï◊ó ◊û◊ë◊ï◊°◊° ◊û◊ô◊ú◊ï◊™ ◊û◊§◊™◊ó ◊¢◊ù ◊ê◊ô◊†◊ì◊ô◊ß◊ò◊ï◊®◊ô◊ù ◊ú◊î◊°◊ú◊û◊î ◊õ◊ï◊ú◊ú ◊û◊ï◊†◊ó◊ô ◊§◊¢◊ï◊ú◊î ◊¶◊ë◊ê◊ô◊™, ◊©◊§◊î ◊ì◊ô◊§◊ú◊ï◊û◊ò◊ô◊™ ◊ï◊î◊¢◊®◊õ◊ï◊™ ◊ê◊ô◊ï◊û◊ô◊ù ◊ë◊û◊°◊§◊® ◊©◊§◊ï◊™",
                lastUpdatedLabel: "◊¢◊ì◊õ◊ï◊ü ◊ê◊ó◊®◊ï◊ü:",
                notYetScanned: "◊ò◊®◊ù ◊†◊°◊®◊ß",
                disclaimerTitle: "‚ö†Ô∏è ◊õ◊™◊ë ◊ï◊ô◊™◊ï◊®:",
                disclaimerText: "◊ú◊ï◊ó ◊û◊ó◊ï◊ï◊†◊ô◊ù ◊ñ◊î ◊î◊ï◊ê ◊õ◊ú◊ô ◊ê◊†◊ú◊ô◊ò◊ô ◊ú◊û◊ò◊®◊ï◊™ ◊ó◊ô◊†◊ï◊õ◊ô◊ï◊™ ◊ï◊û◊ó◊ß◊® ◊ë◊ú◊ë◊ì. ◊î◊°◊™◊ë◊®◊ï◊ô◊ï◊™ ◊û◊ë◊ï◊°◊°◊ï◊™ ◊¢◊ú ◊ê◊ô◊°◊ï◊£ ◊ó◊ì◊©◊ï◊™ ◊ë◊ß◊ï◊ì ◊§◊™◊ï◊ó ◊ï◊†◊ô◊™◊ï◊ó ◊û◊ô◊ú◊ï◊™ ◊û◊§◊™◊ó ◊§◊©◊ï◊ò. ◊õ◊ú◊ô ◊ñ◊î ◊ê◊ô◊†◊ï ◊û◊ô◊ô◊¶◊í ◊î◊¢◊®◊õ◊ï◊™ ◊û◊û◊©◊ú◊™◊ô◊ï◊™ ◊®◊©◊û◊ô◊ï◊™ ◊©◊ú ◊ê◊®◊î\"◊ë ◊ê◊ï ◊¢◊û◊ì◊ï◊™ ◊û◊ì◊ô◊†◊ô◊ï◊™. ◊¢◊ú ◊î◊û◊©◊™◊û◊©◊ô◊ù ◊ú◊î◊™◊ô◊ô◊¢◊• ◊¢◊ù ◊û◊ß◊ï◊®◊ï◊™ ◊û◊ï◊ì◊ô◊¢◊ô◊ü ◊®◊©◊û◊ô◊ô◊ù ◊ú◊ß◊ë◊ú◊™ ◊î◊ó◊ú◊ò◊ï◊™ ◊û◊ë◊¶◊¢◊ô◊ï◊™.",
            },
            
            ar: {
                // Header
                header: "ÿπÿßÿµŸÅÿ© ÿ£ŸÜÿßŸÑŸäÿ™ŸÉÿ≥",
                subtitle: "ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ•ŸÇŸÑŸäŸÖŸäÿ© ŸÑÿßÿ≠ÿ™ŸÖÿßŸÑÿßÿ™ ÿßŸÑÿµÿ±ÿßÿπ ŸÖÿ™ÿπÿØÿØ ÿßŸÑÿ£ÿ∑ÿ±ÿßŸÅ - ÿßŸÑÿ¥ÿ±ŸÇ ÿßŸÑÿ£Ÿàÿ≥ÿ∑",
                themeToggle: "ÿßŸÑÿ™ÿ®ÿØŸäŸÑ: ŸÅÿßÿ™ÿ≠ - ÿØÿßŸÉŸÜ",
                
                // Target Names
                targetHezbollah: "ÿ≠ÿ≤ÿ® ÿßŸÑŸÑŸá",
                targetIran: "ÿ•Ÿäÿ±ÿßŸÜ",
                targetHouthis: "ÿßŸÑÿ≠Ÿàÿ´ŸäŸàŸÜ (ÿßŸÑŸäŸÖŸÜ)",
                targetSyria: "ÿ≥Ÿàÿ±Ÿäÿß",
                
                // Time Window Options
                hours24: "24 ÿ≥ÿßÿπÿ©",
                hours48: "48 ÿ≥ÿßÿπÿ©",
                days7: "7 ÿ£ŸäÿßŸÖ",
                days30: "30 ŸäŸàŸÖÿßŸã",
                
                // Buttons
                scanButtonIndividual: "ŸÖÿ≥ÿ≠ OSINT - ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ™ŸàŸÇÿπÿßÿ™",
                stabilityIndicators: "ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ŸÇÿ±ÿßÿ±",
                
                // Loading States
                loadingText: "ÿ¨ÿßÿ±Ÿç ÿßŸÑŸÖÿ≥ÿ≠...",
                
                // Probability Display
                strikeProbability: "ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿßŸÑÿ∂ÿ±ÿ®ÿ©",
                projectedTimeline: "ÿßŸÑÿ¨ÿØŸàŸÑ ÿßŸÑÿ≤ŸÖŸÜŸä ÿßŸÑŸÖÿ™ŸàŸÇÿπ",
                awaitingScan: "ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÖÿ≥ÿ≠...",
                
                // Timeline Segments
                days030: "0-30 ŸäŸàŸÖ",
                days3190: "31-90 ŸäŸàŸÖ",
                days91180: "91-180 ŸäŸàŸÖ",
                days180plus: "180+ ŸäŸàŸÖ",
                
                // Headlines Section
                recentHeadlines: "ÿπŸÜÿßŸàŸäŸÜ ÿ≠ÿØŸäÿ´ÿ©:",
                clickToScan: "ÿßŸÜŸÇÿ± ÿπŸÑŸâ ÿßŸÑŸÖÿ≥ÿ≠ ŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿ£ÿ≠ÿØÿ´ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±Ÿäÿ©",
                noActionable: "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿπŸÜÿßŸàŸäŸÜ ŸÇÿßÿ®ŸÑÿ© ŸÑŸÑÿ™ŸÜŸÅŸäÿ∞ (ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿ™ŸáÿØŸäÿØ)",
                
                // Threat Matrix
                viewThreatMatrix: "ÿπÿ±ÿ∂ ŸÖÿµŸÅŸàŸÅÿ© ÿßŸÑÿ™ŸáÿØŸäÿØ ŸÖÿ™ÿπÿØÿØÿ© ÿßŸÑÿ£ÿ∑ÿ±ÿßŸÅ",
                hideThreatMatrix: "ÿ•ÿÆŸÅÿßÿ° ŸÖÿµŸÅŸàŸÅÿ© ÿßŸÑÿ™ŸáÿØŸäÿØ",
                combinedProbability: "ÿßÿ≠ÿ™ŸÖÿßŸÑŸäÿ© ÿßŸÑÿ∂ÿ±ÿ®ÿ© ÿßŸÑŸÖÿ¥ÿ™ÿ±ŸÉÿ©",
                incomingThreats: "ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™ ÿßŸÑŸàÿßÿ±ÿØÿ©",
                outgoingThreats: "ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™ ÿßŸÑÿµÿßÿØÿ±ÿ©",
                coordinationBonus: "ÿπÿßŸÖŸÑ ÿßŸÑÿ™ŸÜÿ≥ŸäŸÇ",
                
                // Threat Actors
                israelStrike: "ÿ∂ÿ±ÿ®ÿ© ÿ•ÿ≥ÿ±ÿßÿ¶ŸäŸÑŸäÿ©",
                usStrike: "ÿ∂ÿ±ÿ®ÿ© ÿ£ŸÖÿ±ŸäŸÉŸäÿ©",
                iranToIsrael: "ÿ•Ÿäÿ±ÿßŸÜ ‚Üí ÿ•ÿ≥ÿ±ÿßÿ¶ŸäŸÑ",
                iranToUS: "ÿ•Ÿäÿ±ÿßŸÜ ‚Üí ÿßŸÑŸàŸÑÿßŸäÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©",
                hezbollahToIsrael: "ÿ≠ÿ≤ÿ® ÿßŸÑŸÑŸá ‚Üí ÿ•ÿ≥ÿ±ÿßÿ¶ŸäŸÑ",
                hezbollahToUS: "ÿ≠ÿ≤ÿ® ÿßŸÑŸÑŸá ‚Üí ÿßŸÑŸàŸÑÿßŸäÿßÿ™ ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©",
                houthisToIsrael: "ÿßŸÑÿ≠Ÿàÿ´ŸäŸàŸÜ ‚Üí ÿ•ÿ≥ÿ±ÿßÿ¶ŸäŸÑ",
                syriaToIsrael: "ÿ≥Ÿàÿ±Ÿäÿß ‚Üí ÿ•ÿ≥ÿ±ÿßÿ¶ŸäŸÑ",
                
                // Risk Levels
                riskLow: "ŸÖŸÜÿÆŸÅÿ∂",
                riskModerate: "ŸÖÿπÿ™ÿØŸÑ",
                riskHigh: "ŸÖÿ±ÿ™ŸÅÿπ",
                riskVeryHigh: "ŸÖÿ±ÿ™ŸÅÿπ ÿ¨ÿØÿßŸã",
                
                // Polymarket Section
                polymarketDisclaimerTitle: "‚ö†Ô∏è ÿ•ÿÆŸÑÿßÿ° ŸÖÿ≥ÿ§ŸàŸÑŸäÿ© ÿ™ŸàŸÇÿπÿßÿ™ ÿßŸÑÿ≥ŸàŸÇ",
                polymarketDisclaimerText: "ÿ™ŸÖÿ´ŸÑ ÿ®ŸäÿßŸÜÿßÿ™ Polymarket ÿßÿ≠ÿ™ŸÖÿßŸÑÿßÿ™ ÿ≥ŸàŸÇ ÿßŸÑŸÖÿ±ÿßŸáŸÜÿßÿ™ (ÿ™ŸàŸÇÿπÿßÿ™ ÿ¨ŸÖÿßÿπŸäÿ©). Ÿáÿ∞Ÿá ÿ®ŸäÿßŸÜÿßÿ™ ÿ™ŸÉŸÖŸäŸÑŸäÿ© ŸÅŸÇÿ∑ ŸàŸÑÿß ÿ™ÿ¥ŸÉŸÑ ÿ™ŸÇŸäŸäŸÖÿßŸã ÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±ŸäÿßŸã ÿ£Ÿà ÿ≠ÿ±ŸÅÿ© ÿ™ÿ≠ŸÑŸäŸÑŸäÿ©.",
                
                // Flight Widget
                flightWidgetTitle: "ŸÖÿ±ÿßŸÇÿ® ÿßÿ∂ÿ∑ÿ±ÿßÿ®ÿßÿ™ ÿßŸÑÿ±ÿ≠ŸÑÿßÿ™",
                flightStatusNormal: "ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿßÿ±ÿßÿ™ ÿ∑ÿ®ŸäÿπŸäÿ©",
                flightStatusActive: "ÿßÿ∂ÿ∑ÿ±ÿßÿ®ÿßÿ™ ŸÜÿ¥ÿ∑ÿ©",
                noFlightDisruptions: "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿßÿ∂ÿ∑ÿ±ÿßÿ®ÿßÿ™ ÿ±ÿ≠ŸÑÿßÿ™ ŸÉÿ®Ÿäÿ±ÿ© ŸÅŸä ÿßŸÑŸÖŸÜÿßÿ∑ŸÇ ÿßŸÑŸÖÿ≥ÿ™ŸáÿØŸÅÿ©",
                
                // Rate Limit Box
                requestsUsedLabel: "ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿ©",
                requestsRemainingLabel: "ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸäÿ©",
                dailyLimitLabel: "ÿßŸÑÿ≠ÿØ ÿßŸÑŸäŸàŸÖŸä",
                resetsInLabel: "ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≠ÿµÿ© ŸÅŸä",
                
                // Footer
                dataSourcesLabel: "ŸÖÿµÿßÿØÿ± ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:",
                dataSourcesText: "NewsAPI ŸÑÿ™ÿ¨ŸÖŸäÿπ ŸÖÿµÿßÿØÿ± ÿßŸÑÿ£ÿÆÿ®ÿßÿ±ÿå GDELT ŸÑŸÑŸÖÿ≠ÿ™ŸàŸâ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿπÿ®ÿ±Ÿäÿ© ŸàÿßŸÑŸÅÿßÿ±ÿ≥Ÿäÿ©ÿå Reddit ŸÑŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±Ÿäÿ© ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπŸäÿ©ÿå Polymarket ŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ≥ŸàŸÇ ÿßŸÑÿ™ŸàŸÇÿπÿßÿ™ ÿßŸÑÿ¨ŸÖÿßÿπŸäÿ©ÿå ÿ®ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ŸÖÿµÿßÿØÿ± OSINT ÿ£ÿÆÿ±Ÿâ. ŸÑŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™: asifahanalytics@gmail.com",
                methodologyLabel: "ÿßŸÑŸÖŸÜŸáÿ¨Ÿäÿ©:",
                methodologyText: "ÿ™ÿ≠ŸÑŸäŸÑ ŸÇÿßÿ¶ŸÖ ÿπŸÑŸâ ÿßŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ŸÖÿπ ŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑÿ™ÿµÿπŸäÿØ ÿ®ŸÖÿß ŸÅŸä ÿ∞ŸÑŸÉ ŸÖÿµÿ∑ŸÑÿ≠ÿßÿ™ ÿßŸÑÿπŸÖŸÑ ÿßŸÑÿπÿ≥ŸÉÿ±Ÿä ŸàÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿØÿ®ŸÑŸàŸÖÿßÿ≥Ÿäÿ© Ÿàÿ™ŸÇŸäŸäŸÖÿßÿ™ ÿßŸÑÿ™ŸáÿØŸäÿØÿßÿ™ ÿπÿ®ÿ± ŸÑÿ∫ÿßÿ™ ŸÖÿ™ÿπÿØÿØÿ©",
                lastUpdatedLabel: "ÿ¢ÿÆÿ± ÿ™ÿ≠ÿØŸäÿ´:",
                notYetScanned: "ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑŸÖÿ≥ÿ≠ ÿ®ÿπÿØ",
                disclaimerTitle: "‚ö†Ô∏è ÿ•ÿÆŸÑÿßÿ° ÿßŸÑŸÖÿ≥ÿ§ŸàŸÑŸäÿ©:",
                disclaimerText: "ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ Ÿáÿ∞Ÿá ŸáŸä ÿ£ÿØÿßÿ© ÿ™ÿ≠ŸÑŸäŸÑŸäÿ© ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿ™ÿπŸÑŸäŸÖŸäÿ© Ÿàÿ®ÿ≠ÿ´Ÿäÿ© ŸÅŸÇÿ∑. ÿ™ÿ≥ÿ™ŸÜÿØ ÿßŸÑÿßÿ≠ÿ™ŸÖÿßŸÑÿßÿ™ ÿ•ŸÑŸâ ÿ™ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ŸÖŸÅÿ™Ÿàÿ≠ÿ© ÿßŸÑŸÖÿµÿØÿ± Ÿàÿ™ÿ≠ŸÑŸäŸÑ ÿ®ÿ≥Ÿäÿ∑ ŸÑŸÑŸÉŸÑŸÖÿßÿ™ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©. ŸÑÿß ÿ™ŸÖÿ´ŸÑ Ÿáÿ∞Ÿá ÿßŸÑÿ£ÿØÿßÿ© ÿ™ŸÇŸäŸäŸÖÿßÿ™ ÿ≠ŸÉŸàŸÖŸäÿ© ÿ±ÿ≥ŸÖŸäÿ© ÿ£ŸÖÿ±ŸäŸÉŸäÿ© ÿ£Ÿà ŸÖŸàÿßŸÇŸÅ ÿ≥Ÿäÿßÿ≥Ÿäÿ©. Ÿäÿ¨ÿ® ÿπŸÑŸâ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ŸÖÿµÿßÿØÿ± ÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±ÿßÿ™ ÿ±ÿ≥ŸÖŸäÿ© ŸÑÿßÿ™ÿÆÿßÿ∞ ÿßŸÑŸÇÿ±ÿßÿ±ÿßÿ™ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑŸäÿ©.",
            },
            
            fa: {
                // Header
                header: "ÿ¢ÿ≥€åŸÅŸá ÿ¢ŸÜÿßŸÑ€åÿ™€å⁄©ÿ≥",
                subtitle: "ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ ŸÖŸÜÿ∑ŸÇŸá‚Äåÿß€å ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿØÿ±⁄Ø€åÿ±€å ⁄ÜŸÜÿØ ÿ®ÿßÿ≤€å⁄Øÿ± - ÿÆÿßŸàÿ±ŸÖ€åÿßŸÜŸá",
                themeToggle: "ÿ™ÿ∫€å€åÿ±: ÿ±Ÿàÿ¥ŸÜ - ÿ™€åÿ±Ÿá",
                
                // Target Names
                targetHezbollah: "ÿ≠ÿ≤ÿ®‚ÄåÿßŸÑŸÑŸá",
                targetIran: "ÿß€åÿ±ÿßŸÜ",
                targetHouthis: "ÿ≠Ÿàÿ´€å‚ÄåŸáÿß (€åŸÖŸÜ)",
                targetSyria: "ÿ≥Ÿàÿ±€åŸá",
                
                // Time Window Options
                hours24: "24 ÿ≥ÿßÿπÿ™",
                hours48: "48 ÿ≥ÿßÿπÿ™",
                days7: "7 ÿ±Ÿàÿ≤",
                days30: "30 ÿ±Ÿàÿ≤",
                
                // Buttons
                scanButtonIndividual: "ÿßÿ≥⁄©ŸÜ OSINT - ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å",
                stabilityIndicators: "ÿ¥ÿßÿÆÿµ‚ÄåŸáÿß€å ÿ´ÿ®ÿßÿ™",
                
                // Loading States
                loadingText: "ÿØÿ± ÿ≠ÿßŸÑ ÿßÿ≥⁄©ŸÜ...",
                
                // Probability Display
                strikeProbability: "ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿ≠ŸÖŸÑŸá",
                projectedTimeline: "ÿ¨ÿØŸàŸÑ ÿ≤ŸÖÿßŸÜ€å Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å ÿ¥ÿØŸá",
                awaitingScan: "ÿØÿ± ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßÿ≥⁄©ŸÜ...",
                
                // Timeline Segments
                days030: "0-30 ÿ±Ÿàÿ≤",
                days3190: "31-90 ÿ±Ÿàÿ≤",
                days91180: "91-180 ÿ±Ÿàÿ≤",
                days180plus: "180+ ÿ±Ÿàÿ≤",
                
                // Headlines Section
                recentHeadlines: "ÿ™€åÿ™ÿ±Ÿáÿß€å ÿßÿÆ€åÿ±:",
                clickToScan: "ÿ®ÿ±ÿß€å ÿ®ÿßÿ±⁄Øÿ∞ÿßÿ±€å ÿ¢ÿÆÿ±€åŸÜ ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±ÿßÿ™€å ÿ±Ÿà€å ÿßÿ≥⁄©ŸÜ ⁄©ŸÑ€å⁄© ⁄©ŸÜ€åÿØ",
                noActionable: "Ÿá€å⁄Ü ÿ™€åÿ™ÿ± ŸÇÿßÿ®ŸÑ ÿßŸÇÿØÿßŸÖ€å €åÿßŸÅÿ™ ŸÜÿ¥ÿØ (Ÿá€å⁄Ü ÿ¥ÿßÿÆÿµ ÿ™ŸáÿØ€åÿØ€å ÿ¥ŸÜÿßÿ≥ÿß€å€å ŸÜÿ¥ÿØ)",
                
                // Threat Matrix
                viewThreatMatrix: "ŸÜŸÖÿß€åÿ¥ ŸÖÿßÿ™ÿ±€åÿ≥ ÿ™ŸáÿØ€åÿØ ⁄ÜŸÜÿØ ÿ®ÿßÿ≤€å⁄Øÿ±",
                hideThreatMatrix: "ŸæŸÜŸáÿßŸÜ ⁄©ÿ±ÿØŸÜ ŸÖÿßÿ™ÿ±€åÿ≥ ÿ™ŸáÿØ€åÿØ",
                combinedProbability: "ÿßÿ≠ÿ™ŸÖÿßŸÑ ÿ≠ŸÖŸÑŸá ÿ™ÿ±⁄©€åÿ®€å",
                incomingThreats: "ÿ™ŸáÿØ€åÿØÿßÿ™ Ÿàÿ±ŸàÿØ€å",
                outgoingThreats: "ÿ™ŸáÿØ€åÿØÿßÿ™ ÿÆÿ±Ÿàÿ¨€å",
                coordinationBonus: "ŸÅÿß⁄©ÿ™Ÿàÿ± ŸáŸÖÿßŸáŸÜ⁄Ø€å",
                
                // Threat Actors
                israelStrike: "ÿ≠ŸÖŸÑŸá ÿßÿ≥ÿ±ÿßÿ¶€åŸÑ",
                usStrike: "ÿ≠ŸÖŸÑŸá ÿ¢ŸÖÿ±€å⁄©ÿß",
                iranToIsrael: "ÿß€åÿ±ÿßŸÜ ‚Üí ÿßÿ≥ÿ±ÿßÿ¶€åŸÑ",
                iranToUS: "ÿß€åÿ±ÿßŸÜ ‚Üí ÿ¢ŸÖÿ±€å⁄©ÿß",
                hezbollahToIsrael: "ÿ≠ÿ≤ÿ®‚ÄåÿßŸÑŸÑŸá ‚Üí ÿßÿ≥ÿ±ÿßÿ¶€åŸÑ",
                hezbollahToUS: "ÿ≠ÿ≤ÿ®‚ÄåÿßŸÑŸÑŸá ‚Üí ÿ¢ŸÖÿ±€å⁄©ÿß",
                houthisToIsrael: "ÿ≠Ÿàÿ´€å‚ÄåŸáÿß ‚Üí ÿßÿ≥ÿ±ÿßÿ¶€åŸÑ",
                syriaToIsrael: "ÿ≥Ÿàÿ±€åŸá ‚Üí ÿßÿ≥ÿ±ÿßÿ¶€åŸÑ",
                
                // Risk Levels
                riskLow: "⁄©ŸÖ",
                riskModerate: "ŸÖÿ™Ÿàÿ≥ÿ∑",
                riskHigh: "ÿ®ÿßŸÑÿß",
                riskVeryHigh: "ÿ®ÿ≥€åÿßÿ± ÿ®ÿßŸÑÿß",
                
                // Polymarket Section
                polymarketDisclaimerTitle: "‚ö†Ô∏è ÿ≥ŸÑÿ® ŸÖÿ≥ÿ¶ŸàŸÑ€åÿ™ Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å‚ÄåŸáÿß€å ÿ®ÿßÿ≤ÿßÿ±",
                polymarketDisclaimerText: "ÿØÿßÿØŸá‚ÄåŸáÿß€å Polymarket ŸÜÿ¥ÿßŸÜ‚ÄåÿØŸáŸÜÿØŸá ÿßÿ≠ÿ™ŸÖÿßŸÑÿßÿ™ ÿ®ÿßÿ≤ÿßÿ± ÿ¥ÿ±ÿ∑‚Äåÿ®ŸÜÿØ€å (Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å‚ÄåŸáÿß€å ÿ¨ŸÖÿπ€å) ÿßÿ≥ÿ™. ÿß€åŸÜ ŸÅŸÇÿ∑ ÿØÿßÿØŸá‚ÄåŸáÿß€å ÿ™⁄©ŸÖ€åŸÑ€å ÿßÿ≥ÿ™ Ÿà ÿßÿ±ÿ≤€åÿßÿ®€å ÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±ÿßÿ™€å €åÿß ⁄©ÿßÿ± ÿ™ÿ≠ŸÑ€åŸÑ€å ŸÜ€åÿ≥ÿ™.",
                
                // Flight Widget
                flightWidgetTitle: "ŸÖÿßŸÜ€åÿ™Ÿàÿ± ÿßÿÆÿ™ŸÑÿßŸÑÿßÿ™ Ÿæÿ±Ÿàÿßÿ≤€å",
                flightStatusNormal: "ŸáŸÖŸá ŸÖÿ≥€åÿ±Ÿáÿß ÿπÿßÿØ€å",
                flightStatusActive: "ÿßÿÆÿ™ŸÑÿßŸÑÿßÿ™ ŸÅÿπÿßŸÑ",
                noFlightDisruptions: "Ÿá€å⁄Ü ÿßÿÆÿ™ŸÑÿßŸÑ ÿπŸÖÿØŸá Ÿæÿ±Ÿàÿßÿ≤€å ÿØÿ± ŸÖŸÜÿßÿ∑ŸÇ ŸáÿØŸÅ ÿ¥ŸÜÿßÿ≥ÿß€å€å ŸÜÿ¥ÿØ",
                
                // Rate Limit Box
                requestsUsedLabel: "ÿØÿ±ÿÆŸàÿßÿ≥ÿ™‚ÄåŸáÿß€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ÿØŸá",
                requestsRemainingLabel: "ÿØÿ±ÿÆŸàÿßÿ≥ÿ™‚ÄåŸáÿß€å ÿ®ÿßŸÇ€åŸÖÿßŸÜÿØŸá",
                dailyLimitLabel: "ŸÖÿ≠ÿØŸàÿØ€åÿ™ ÿ±Ÿàÿ≤ÿßŸÜŸá",
                resetsInLabel: "ÿ®ÿßÿ≤ŸÜÿ¥ÿßŸÜ€å ÿ≥ŸáŸÖ€åŸá ÿØÿ±",
                
                // Footer
                dataSourcesLabel: "ŸÖŸÜÿßÿ®ÿπ ÿØÿßÿØŸá:",
                dataSourcesText: "NewsAPI ÿ®ÿ±ÿß€å ÿ¨ŸÖÿπ‚Äåÿ¢Ÿàÿ±€å ŸÖŸÜÿßÿ®ÿπ ÿÆÿ®ÿ±€åÿå GDELT ÿ®ÿ±ÿß€å ŸÖÿ≠ÿ™Ÿàÿß€å ÿπÿ±ÿ®€åÿå ÿπÿ®ÿ±€å Ÿà ŸÅÿßÿ±ÿ≥€åÿå Reddit ÿ®ÿ±ÿß€å ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±ÿßÿ™€å ÿ¨ÿßŸÖÿπŸáÿå Polymarket ÿ®ÿ±ÿß€å ÿØÿßÿØŸá‚ÄåŸáÿß€å ÿ®ÿßÿ≤ÿßÿ± Ÿæ€åÿ¥‚Äåÿ®€åŸÜ€å ÿ¨ŸÖÿπ€åÿå ÿ®Ÿá ÿπŸÑÿßŸàŸá ÿ≥ÿß€åÿ± ŸÖŸÜÿßÿ®ÿπ OSINT. ÿ®ÿ±ÿß€å ÿ≥ŸàÿßŸÑÿßÿ™: asifahanalytics@gmail.com",
                methodologyLabel: "ÿ±Ÿàÿ¥‚Äåÿ¥ŸÜÿßÿ≥€å:",
                methodologyText: "ÿ™ÿ≠ŸÑ€åŸÑ ŸÖÿ®ÿ™ŸÜ€å ÿ®ÿ± ⁄©ŸÑ€åÿØŸàÿß⁄òŸá ÿ®ÿß ÿ¥ÿßÿÆÿµ‚ÄåŸáÿß€å ÿ™ÿ¥ÿØ€åÿØ ÿ¥ÿßŸÖŸÑ ÿßÿµÿ∑ŸÑÿßÿ≠ÿßÿ™ ÿßŸÇÿØÿßŸÖ ŸÜÿ∏ÿßŸÖ€åÿå ÿ≤ÿ®ÿßŸÜ ÿØ€åŸæŸÑŸÖÿßÿ™€å⁄© Ÿà ÿßÿ±ÿ≤€åÿßÿ®€å ÿ™ŸáÿØ€åÿØÿßÿ™ ÿØÿ± ⁄ÜŸÜÿØ€åŸÜ ÿ≤ÿ®ÿßŸÜ",
                lastUpdatedLabel: "ÿ¢ÿÆÿ±€åŸÜ ÿ®Ÿá‚Äåÿ±Ÿàÿ≤ÿ±ÿ≥ÿßŸÜ€å:",
                notYetScanned: "ŸáŸÜŸàÿ≤ ÿßÿ≥⁄©ŸÜ ŸÜÿ¥ÿØŸá",
                disclaimerTitle: "‚ö†Ô∏è ÿ≥ŸÑÿ® ŸÖÿ≥ÿ¶ŸàŸÑ€åÿ™:",
                disclaimerText: "ÿß€åŸÜ ÿØÿßÿ¥ÿ®Ÿàÿ±ÿØ €å⁄© ÿßÿ®ÿ≤ÿßÿ± ÿ™ÿ≠ŸÑ€åŸÑ€å ÿ®ÿ±ÿß€å ÿßŸáÿØÿßŸÅ ÿ¢ŸÖŸàÿ≤ÿ¥€å Ÿà ÿ™ÿ≠ŸÇ€åŸÇÿßÿ™€å ÿßÿ≥ÿ™. ÿßÿ≠ÿ™ŸÖÿßŸÑÿßÿ™ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿ¨ŸÖÿπ‚Äåÿ¢Ÿàÿ±€å ÿßÿÆÿ®ÿßÿ± ŸÖŸÜÿ®ÿπ ÿ®ÿßÿ≤ Ÿà ÿ™ÿ≠ŸÑ€åŸÑ ÿ≥ÿßÿØŸá ⁄©ŸÑ€åÿØŸàÿß⁄òŸá ÿßÿ≥ÿ™. ÿß€åŸÜ ÿßÿ®ÿ≤ÿßÿ± ŸÜÿ¥ÿßŸÜ‚ÄåÿØŸáŸÜÿØŸá ÿßÿ±ÿ≤€åÿßÿ®€å‚ÄåŸáÿß€å ÿ±ÿ≥ŸÖ€å ÿØŸàŸÑÿ™ ÿ¢ŸÖÿ±€å⁄©ÿß €åÿß ŸÖŸàÿ∂ÿπ‚Äå⁄Ø€åÿ±€å‚ÄåŸáÿß€å ÿ≥€åÿßÿ≥€å ŸÜ€åÿ≥ÿ™. ⁄©ÿßÿ±ÿ®ÿ±ÿßŸÜ ÿ®ÿß€åÿØ ÿ®ÿ±ÿß€å ÿ™ÿµŸÖ€åŸÖ‚Äå⁄Ø€åÿ±€å‚ÄåŸáÿß€å ÿπŸÖŸÑ€åÿßÿ™€å ÿ®ÿß ŸÖŸÜÿßÿ®ÿπ ÿßÿ≥ÿ™ÿÆÿ®ÿßÿ±ÿßÿ™€å ÿ±ÿ≥ŸÖ€å ŸÖÿ¥Ÿàÿ±ÿ™ ⁄©ŸÜŸÜÿØ.",
            }
        };

        let currentLanguage = 'en';
        let globalRateLimit = null;
        let resetCountdownInterval = null;

        function initLanguage() {
            const saved = localStorage.getItem('asifah-language');
            if (saved && translations[saved]) {
                currentLanguage = saved;
                applyLanguage(saved);
            }
        }

        function switchLanguage(lang, button) {
            if (!translations[lang]) return;
            currentLanguage = lang;
            localStorage.setItem('asifah-language', lang);
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            if (button) button.classList.add('active');
            applyLanguage(lang);
        }

        function applyLanguage(lang) {
            const t = translations[lang];
            document.documentElement.setAttribute('lang', lang);
            document.documentElement.setAttribute('dir', lang === 'he' || lang === 'ar' || lang === 'fa' ? 'rtl' : 'ltr');
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (t[key]) {
                    if (element.tagName === 'INPUT') {
                        element.value = t[key];
                    } else {
                        element.textContent = t[key];
                    }
                }
            });
            document.title = t.header + ' - ' + t.subtitle;
        }

        function updateRateLimitDisplay(rateLimit) {
            if (!rateLimit) return;
            globalRateLimit = rateLimit;
            const used = rateLimit.requests_used || 0;
            const limit = rateLimit.requests_limit || 100;
            const remaining = rateLimit.requests_remaining || 0;
            document.getElementById('requestsUsed').textContent = used;
            document.getElementById('requestsLimit').textContent = limit;
            document.getElementById('requestsRemaining').textContent = remaining;
            const remainingEl = document.getElementById('requestsRemaining');
            const rateLimitBox = document.getElementById('rateLimitBox');
            remainingEl.classList.remove('success', 'warning', 'danger');
            rateLimitBox.classList.remove('warning', 'danger');
            if (remaining === 0) {
                remainingEl.classList.add('danger');
                rateLimitBox.classList.add('danger');
            } else if (remaining <= 20) {
                remainingEl.classList.add('warning');
                rateLimitBox.classList.add('warning');
            } else {
                remainingEl.classList.add('success');
            }
            if (resetCountdownInterval) clearInterval(resetCountdownInterval);
            startResetCountdown(rateLimit.resets_in_seconds);
        }
        
        function startResetCountdown(seconds) {
            let remaining = seconds;
            function updateCountdown() {
                if (remaining <= 0) {
                    document.getElementById('resetCountdown').textContent = 'Resetting...';
                    setTimeout(fetchRateLimitStatus, 1000);
                    return;
                }
                const hours = Math.floor(remaining / 3600);
                const minutes = Math.floor((remaining % 3600) / 60);
                const secs = remaining % 60;
                document.getElementById('resetCountdown').textContent = `${hours}h ${minutes}m ${secs}s`;
                remaining--;
            }
            updateCountdown();
            resetCountdownInterval = setInterval(updateCountdown, 1000);
        }
        
        async function fetchRateLimitStatus() {
            try {
                const response = await fetch(`${BACKEND_URL}/rate-limit`);
                const data = await response.json();
                updateRateLimitDisplay(data);
            } catch (error) {
                console.error('Failed to fetch rate limit:', error);
            }
        }

        async function fetchPolymarketData() {
            const ticker = document.getElementById('polymarketTicker');
            if (!ticker) return;
            try {
                const response = await fetch(`${BACKEND_URL}/api/polymarket`);
                if (!response.ok) throw new Error(`HTTP ${response.status}`);
                const data = await response.json();
                if (!data.success || !data.markets || data.markets.length === 0) {
                    displayPolymarketFallback();
                    return;
                }
                displayPolymarketTicker(data.markets);
            } catch (error) {
                console.error('[Polymarket] Error:', error);
                displayPolymarketFallback();
            }
        }

        function displayPolymarketTicker(markets) {
            const ticker = document.getElementById('polymarketTicker');
            if (!ticker || !markets || markets.length === 0) {
                displayPolymarketFallback();
                return;
            }
            let html = '';
            markets.forEach(market => {
                const pct = Math.round((market.probability || 0) * 100);
                html += `<div class="ticker-item"><strong>${market.question}</strong><span class="ticker-probability">${pct}%</span><a href="${market.url}" target="_blank" rel="noopener noreferrer">View</a></div>`;
            });
            ticker.innerHTML = html + html;
        }

        function displayPolymarketFallback() {
            const ticker = document.getElementById('polymarketTicker');
            if (!ticker) return;
            ticker.innerHTML = '<div class="ticker-item"><strong>‚ö†Ô∏è Polymarket data temporarily unavailable</strong><a href="https://polymarket.com/" target="_blank" rel="noopener noreferrer">Visit Polymarket</a></div>';
        }

        async function scanSingleTarget(targetName) {
            const button = document.querySelector(`#${targetName}-card .card-scan-button`);
            const loading = document.getElementById(`${targetName}-loading`);
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.classList.remove('show');
            try {
                const clickSound = document.getElementById('clickSound');
                clickSound.currentTime = 0;
                clickSound.play().catch(() => {});
            } catch (e) {}
            button.classList.add('scanning');
            button.disabled = true;
            loading.classList.add('active');
            const timeWindow = parseInt(document.querySelector(`input[name="${targetName}-timeWindow"]:checked`).value);
            try {
                await scanTarget(targetName, timeWindow);
                const now = new Date();
                document.getElementById('lastUpdatedValue').textContent = `${targetName.toUpperCase()}: ` + now.toLocaleString('en-US', {
                    month: 'long', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit', timeZoneName: 'short'
                }) + ` (last ${timeWindow} day(s))`;
                const matrixDetails = document.getElementById(`${targetName}-matrix-details`);
                if (matrixDetails && matrixDetails.classList.contains('show')) {
                    loadThreatMatrixData(targetName, timeWindow);
                }
            } catch (error) {
                console.error('Scan error:', error);
                errorMessage.textContent = `Error scanning ${targetName}: ` + error.message;
                errorMessage.classList.add('show');
            } finally {
                loading.classList.remove('active');
                button.classList.remove('scanning');
                button.disabled = false;
                fetchRateLimitStatus();
            }
        }

async function scanTarget(targetName, days) {
    // Map target names to new endpoint URLs
    const endpointMap = {
        'iran': '/api/iran-strike-probability',
        'hezbollah': '/api/hezbollah-activity',
        'houthis': '/api/houthis-threat',
        'syria': '/api/syria-conflict'
    };
    
    const endpoint = endpointMap[targetName];
    if (!endpoint) {
        throw new Error(`Unknown target: ${targetName}`);
    }
    
    // Add ?refresh=true to force fresh scan (button click)
    const url = `${BACKEND_URL}${endpoint}?refresh=true&days=${days}`;
    const response = await fetch(url);
            if (!response.ok) {
                const text = await response.text();
                throw new Error(`HTTP ${response.status}: ${text.slice(0, 200)}`);
            }
            const data = await response.json();
            if (!data.success) {
                throw new Error(data.error || 'Unknown error');
            }
            const probability = data.probability || 0;
            const timeline = data.timeline || 'Unknown';
            updateProbability(targetName, probability, data.cached);
            updateTimeline(targetName, timeline, probability);
            displayHeadlinesWithWeights(targetName, data);
        }

        function updateProbability(targetId, probability, isCached) {
            const gaugeElement = document.getElementById(`${targetId}-gauge`);
            const textElement = document.getElementById(`${targetId}-prob`);
            const cardElement = document.getElementById(`${targetId}-card`);
            textElement.textContent = `${probability}%`;
            let threatClass = 'medium';
            if (probability < 34) threatClass = 'low';
            else if (probability >= 67) threatClass = 'high';
            gaugeElement.classList.remove('low', 'medium', 'high');
            gaugeElement.classList.add(threatClass);
            textElement.classList.remove('low', 'medium', 'high');
            textElement.classList.add(threatClass);
            cardElement.classList.remove('low-threat', 'medium-threat', 'high-threat');
            cardElement.classList.add(`${threatClass}-threat`);
            const circumference = 534;
            const progress = (probability / 100) * circumference;
            gaugeElement.setAttribute('stroke-dasharray', `${progress} ${circumference}`);
        }

        function updateTimeline(targetId, timeline, probability) {
            document.getElementById(`${targetId}-timeline`).textContent = timeline;
            const barElement = document.getElementById(`${targetId}-bar`);
            const segments = barElement.querySelectorAll('.timeline-segment');
            segments.forEach(seg => seg.classList.remove('active'));
            if (probability >= 70) segments[0].classList.add('active');
            else if (probability >= 50) segments[1].classList.add('active');
            else if (probability >= 30) segments[2].classList.add('active');
            else segments[3].classList.add('active');
        }

        function displayHeadlinesWithWeights(targetId, data) {
    const container = document.getElementById(`${targetId}-headlines`);
    const t = translations[currentLanguage];
    
    // ‚úÖ FIXED - Check for recent_headlines
    if (!data || !data.recent_headlines || data.recent_headlines.length === 0) {
        container.innerHTML = `<h4>${t.recentHeadlines || 'Recent Headlines:'}</h4><p style="color: #7f8c8d; font-style: italic;">No actionable headlines found</p>`;
        return;
    }
    
    // ‚úÖ FIXED - Use recent_headlines from backend
    const headlines = data.recent_headlines.slice(0, 10);
    let html = `<h4>${t.recentHeadlines || 'Recent Headlines:'} (Weighted by Impact)</h4>`;
    
    headlines.forEach(headline => {
        const date = headline.published ? new Date(headline.published).toLocaleDateString() : 'Unknown date';
        const weight = headline.weight || 0;
        const threatType = headline.threat_type || 'Unknown';
        
        // Color coding by threat type
        let icon = '‚ö†Ô∏è';
        let borderColor = '#1e3a5f';
        if (threatType === 'Reverse Threat') {
            icon = 'üî¥';
            borderColor = '#f39c12';
        } else if (threatType === 'US Strike') {
            icon = 'üá∫üá∏';
            borderColor = '#3498db';
        } else if (threatType === 'Israel Strike') {
            icon = 'üáÆüá±';
            borderColor = '#c0392b';
        }
        
        // Impact badge
        let impactClass = 'low-impact';
        if (weight >= 2.0) impactClass = 'high-impact';
        else if (weight >= 1.0) impactClass = 'medium-impact';
        
        html += `
            <div class="headline-item" style="border-left-color: ${borderColor};">
                <a href="${headline.url}" target="_blank" rel="noopener noreferrer">
                    ${icon} ${headline.title || 'Untitled article'}
                </a>
                <span class="article-weight-badge ${impactClass}">
                    Weight: ${weight.toFixed(2)}
                </span>
                <div class="article-contribution-bar">
                    <div class="article-contribution-fill" style="width: ${Math.min(weight * 20, 100)}%"></div>
                </div>
                <div class="article-scoring-details">
                    <span><strong>Source:</strong> ${headline.source}</span>
                    <span><strong>Date:</strong> ${date}</span>
                    <span><strong>Type:</strong> ${threatType}</span>
                    ${headline.phrase ? `<span><strong>Phrase:</strong> "${headline.phrase}"</span>` : ''}
                    ${headline.why_included ? `<span><strong>Why:</strong> ${headline.why_included}</span>` : ''}
                </div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

async function updateFlightCancellations() {
            const grid = document.getElementById('flightCancellationsGrid');
            const badge = document.getElementById('flightStatusBadge');
            if (!grid || !badge) return;
            grid.innerHTML = '<div style="text-align: center; padding: 40px; color: #6b7280;"><div style="display: inline-block; width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #1e3a5f; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 15px;"></div><div style="font-size: 14px; font-weight: 500;">Scanning flight disruptions...</div></div>';
            badge.className = 'flight-status-badge active';
            badge.innerHTML = '<span>Loading...</span>';
            try {
                const response = await fetch(`${BACKEND_URL}/flight-cancellations`);
                if (response.status === 404) {
                    displayFlightCancellations([]);
                    window.__disableFlightCancellations = true;
                    return;
                }
                if (!response.ok) {
                    displayFlightCancellations([]);
                    return;
                }
                const contentType = response.headers.get('content-type') || '';
                if (!contentType.includes('application/json')) {
                    displayFlightCancellations([]);
                    return;
                }
                const data = await response.json();
                displayFlightCancellations(data.cancellations || []);
            } catch (error) {
                console.warn('Flight cancellations failed:', error);
                displayFlightCancellations([]);
            }
        }

        function getAirlineLogo(airlineName) {
            return `https://logo.clearbit.com/${getAirlineDomain(airlineName)}`;
        }
        
        function getAirlineDomain(airlineName) {
            const domainMap = {
                'Lufthansa': 'lufthansa.com', 'Air France': 'airfrance.com', 'British Airways': 'britishairways.com',
                'Delta': 'delta.com', 'United': 'united.com', 'American Airlines': 'aa.com', 'Emirates': 'emirates.com',
                'Turkish Airlines': 'turkishairlines.com', 'El Al': 'elal.com'
            };
            return domainMap[airlineName] || 'example.com';
        }
        
        function getCountryFlagImage(destination) {
            const countryCodeMap = {
                'Tel Aviv': 'il', 'Israel': 'il', 'Beirut': 'lb', 'Lebanon': 'lb', 'Damascus': 'sy', 'Syria': 'sy',
                'Tehran': 'ir', 'Iran': 'ir', 'Sanaa': 'ye', 'Yemen': 'ye'
            };
            const countryCode = countryCodeMap[destination];
            return countryCode ? `https://flagcdn.com/24x18/${countryCode}.png` : null;
        }

        let flightCardsVisible = 4; // Track how many cards are visible

        function displayFlightCancellations(cancellations) {
            const grid = document.getElementById('flightCancellationsGrid');
            const badge = document.getElementById('flightStatusBadge');
            const expandButton = document.getElementById('flightExpandButton');
            
            if (!grid || !badge) return;
            
            const t = translations[currentLanguage] || translations.en;
            
            if (!cancellations || cancellations.length === 0) {
                grid.innerHTML = '<div class="no-cancellations">No major flight disruptions detected</div>';
                badge.className = 'flight-status-badge normal';
                badge.innerHTML = '<span>All Routes Normal</span>';
                if (expandButton) expandButton.style.display = 'none';
                return;
            }
            
            badge.className = 'flight-status-badge active';
            badge.innerHTML = `<span>Active Disruptions (${cancellations.length})</span>`;
            
            let html = '';
            cancellations.forEach((cancel, index) => {
                const date = cancel.date ? new Date(cancel.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }) : '';
                const logoUrl = getAirlineLogo(cancel.airline);
                const flagImageUrl = getCountryFlagImage(cancel.destination);
                
                let statusClass = 'status-suspended';
                let statusIcon = 'üö´';
                if (cancel.status === 'Resumed') {
                    statusClass = 'status-resumed';
                    statusIcon = '‚úÖ';
                }
                
                // Hide cards beyond first 4
                const hiddenClass = index >= 4 ? ' hidden-card' : '';
                
                html += `<div class="cancellation-card ${statusClass}${hiddenClass}" data-card-index="${index}">
                    <div class="cancellation-header">
                        <img src="${logoUrl}" alt="${cancel.airline}" class="airline-logo" onerror="this.style.display='none';">
                        <div class="cancellation-airline">${cancel.airline || 'Unknown Airline'}</div>
                        <span class="cancellation-status-badge ${statusClass}">${statusIcon} ${cancel.status || 'Suspended'}</span>
                    </div>
                    <div class="cancellation-route">
                        ${flagImageUrl ? `<img src="${flagImageUrl}" style="width:20px; height:15px; vertical-align:middle; margin-right:6px;">` : '‚úàÔ∏è'}
                        ${cancel.route || `${cancel.origin || 'Various'} ‚Üí ${cancel.destination || 'Unknown'}`}
                    </div>
                    <div class="cancellation-details">
                        <div class="detail-row"><strong>üìÖ Announced:</strong> ${date}</div>
                        <div class="detail-row"><strong>‚è±Ô∏è Duration:</strong> ${cancel.duration || 'Indefinite'}</div>
                        ${cancel.source_url ? `<div class="detail-row"><a href="${cancel.source_url}" target="_blank" rel="noopener noreferrer" class="source-link">üì∞ View Article ‚Üí</a></div>` : ''}
                    </div>
                </div>`;
            });
            
            grid.innerHTML = html;
            
            // Show expand button if more than 4 cards
            if (expandButton) {
                if (cancellations.length > 4) {
                    expandButton.style.display = 'block';
                    flightCardsVisible = 4;
                    updateExpandButton(cancellations.length);
                } else {
                    expandButton.style.display = 'none';
                }
            }
        }

        function updateExpandButton(totalCards) {
            const expandButton = document.getElementById('flightExpandButton');
            if (!expandButton) return;
            
            const hiddenCards = document.querySelectorAll('.cancellation-card.hidden-card');
            
            if (hiddenCards.length === 0) {
                // All cards visible - show "collapse" button
                expandButton.textContent = 'Show Less ‚ñ≤';
            } else {
                // Some cards hidden - show how many more
                const remaining = hiddenCards.length;
                const toShow = Math.min(4, remaining);
                expandButton.textContent = `Show ${toShow} More ‚ñº`;
            }
        }

        function toggleFlightCards() {
            const allCards = document.querySelectorAll('.cancellation-card');
            const hiddenCards = document.querySelectorAll('.cancellation-card.hidden-card');
            
            if (hiddenCards.length === 0) {
                // All visible - collapse back to 4
                allCards.forEach((card, index) => {
                    if (index >= 4) {
                        card.classList.add('hidden-card');
                    }
                });
                flightCardsVisible = 4;
            } else {
                // Show next 4
                let shown = 0;
                hiddenCards.forEach(card => {
                    if (shown < 4) {
                        card.classList.remove('hidden-card');
                        shown++;
                    }
                });
                flightCardsVisible += shown;
            }
            
            updateExpandButton(allCards.length);
        }

        // Add event listener for expand button
        window.addEventListener('DOMContentLoaded', () => {
            const expandButton = document.getElementById('flightExpandButton');
            if (expandButton) {
                expandButton.addEventListener('click', toggleFlightCards);
            }
        });

        // ===========================================
        // NOTAM FUNCTIONS
        // ===========================================

        async function updateNotams() {
            const wrapper = document.getElementById('notamCardsWrapper');
            const badge = document.getElementById('notamStatusBadge');
            
            if (!wrapper || !badge) return;
            
            badge.innerHTML = '<span>Loading...</span>';
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/notams`);
                
                if (!response.ok) {
                    displayNotams([]);
                    return;
                }
                
                const data = await response.json();
                displayNotams(data.notams || []);
                
            } catch (error) {
                console.warn('NOTAM fetch error:', error);
                displayNotams([]);
            }
        }

        function displayNotams(notams) {
            const wrapper = document.getElementById('notamCardsWrapper');
            const badge = document.getElementById('notamStatusBadge');
            
            if (!wrapper || !badge) return;
            
            if (!notams || notams.length === 0) {
                badge.innerHTML = '<span>0 Active</span>';
                wrapper.innerHTML = `
                    <div class="no-notams">
                        <div class="no-notams-title">No Active NOTAMs</div>
                        <div class="no-notams-subtitle">All Middle East airspace operating normally</div>
                    </div>
                `;
                return;
            }
            
            badge.innerHTML = `<span>${notams.length} Active</span>`;
            
            // Determine color class based on NOTAM type
            function getColorClass(color) {
                const colorMap = {
                    'red': 'type-red',
                    'orange': 'type-orange',
                    'yellow': 'type-yellow',
                    'purple': 'type-purple',
                    'blue': 'type-blue',
                    'gray': 'type-gray'
                };
                return colorMap[color] || 'type-gray';
            }
            
            // Generate NOTAM cards
            let html = '';
            notams.forEach(notam => {
                const colorClass = getColorClass(notam.color);
                
                html += `
                    <div class="notam-card ${colorClass}">
                        <div class="notam-header">
                            <div class="notam-country">${notam.flag} ${notam.country} (${notam.fir})</div>
                        </div>
                        <div class="notam-type-badge ${colorClass}">
                            ${notam.icon} ${notam.type}
                        </div>
                        <div class="notam-summary">${notam.summary}</div>
                        <div class="notam-details">
                            <div class="notam-detail-row">
                                <strong>üìÖ Valid:</strong> ${notam.valid_range}
                            </div>
                            <div class="notam-detail-row">
                                <strong>üïê Effective:</strong> ${notam.effective_date || 'Immediately'}
                            </div>
                            ${notam.source_url ? `
                                <a href="${notam.source_url}" target="_blank" rel="noopener noreferrer" class="notam-link">
                                    üì∞ View NOTAM ‚Üí
                                </a>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            // Duplicate cards for seamless infinite scroll
            wrapper.innerHTML = html + html;
        }

// Update NOTAMs on page load and every 15 minutes
        window.addEventListener('DOMContentLoaded', () => {
            updateNotams();  
            setInterval(updateNotams, 900000); // 15 minutes
        });

        function toggleThreatMatrix(target) {
            const details = document.getElementById(`${target}-matrix-details`);
            const button = document.querySelector(`#${target}-card .expand-matrix-button .expand-matrix-text`);
            if (details.classList.contains('show')) {
                details.classList.remove('show');
                button.innerHTML = 'üìä <span data-i18n="viewThreatMatrix">View Multi-Actor Threat Matrix</span> ‚ñº';
            } else {
                details.classList.add('show');
                button.innerHTML = 'üìä <span data-i18n="hideThreatMatrix">Hide Multi-Actor Threat Matrix</span> ‚ñ≤';
                const timeWindow = parseInt(document.querySelector(`input[name="${target}-timeWindow"]:checked`).value);
                loadThreatMatrixData(target, timeWindow);
            }
        }

        function getRiskClass(riskLevel) {
            return `risk-${riskLevel.replace('_', '-')}`;
        }

        function getColorClass(riskLevel) {
            return riskLevel.replace('_', '-');
        }

        async function loadThreatMatrixData(target, days = 7) {
            try {
                console.log(`[Threat Matrix] Loading ${target} for ${days} days...`);
                const response = await fetch(`${BACKEND_URL}/api/threat-matrix/${target}?days=${days}`);
                const data = await response.json();
                if (!data.success) {
                    throw new Error(data.error || 'Failed to load threat matrix');
                }
                const combined = data.combined_probability;
                document.getElementById(`${target}-combined-value`).textContent = combined.value.toFixed(1) + '%';
                document.getElementById(`${target}-combined-bar`).style.width = combined.value + '%';
                const coordValue = combined.coordination_bonus.toFixed(1);
                document.getElementById(`${target}-coord-value`).textContent = (combined.coordination_bonus > 0 ? '+' : '') + coordValue + '%';
                const combinedColorClass = getColorClass(combined.risk_level);
                document.getElementById(`${target}-combined-value`).className = `combined-value ${combinedColorClass}`;
                document.getElementById(`${target}-combined-bar`).className = `probability-fill ${combinedColorClass}`;
                const israel = data.incoming_threats.israel;
                document.getElementById(`${target}-israel-prob`).textContent = israel.probability.toFixed(1) + '%';
                document.getElementById(`${target}-israel-bar`).style.width = israel.probability + '%';
                document.getElementById(`${target}-israel-risk`).textContent = israel.risk_level.replace('_', ' ').toUpperCase();
                document.getElementById(`${target}-israel-risk`).className = `risk-badge ${getRiskClass(israel.risk_level)}`;
                const us = data.incoming_threats.us;
                document.getElementById(`${target}-us-prob`).textContent = us.probability.toFixed(1) + '%';
                document.getElementById(`${target}-us-bar`).style.width = us.probability + '%';
                document.getElementById(`${target}-us-risk`).textContent = us.risk_level.replace('_', ' ').toUpperCase();
                document.getElementById(`${target}-us-risk`).className = `risk-badge ${getRiskClass(us.risk_level)}`;
                const toIsrael = data.outgoing_threats.vs_israel;
                document.getElementById(`${target}-to-israel-prob`).textContent = toIsrael.probability.toFixed(1) + '%';
                document.getElementById(`${target}-to-israel-bar`).style.width = toIsrael.probability + '%';
                document.getElementById(`${target}-to-israel-risk`).textContent = toIsrael.risk_level.replace('_', ' ').toUpperCase();
                document.getElementById(`${target}-to-israel-risk`).className = `risk-badge ${getRiskClass(toIsrael.risk_level)}`;
                const toUSEl = document.getElementById(`${target}-to-us-prob`);
                if (toUSEl && data.outgoing_threats.vs_us) {
                    const toUS = data.outgoing_threats.vs_us;
                    toUSEl.textContent = toUS.probability.toFixed(1) + '%';
                    document.getElementById(`${target}-to-us-bar`).style.width = toUS.probability + '%';
                    document.getElementById(`${target}-to-us-risk`).textContent = toUS.risk_level.replace('_', ' ').toUpperCase();
                    document.getElementById(`${target}-to-us-risk`).className = `risk-badge ${getRiskClass(toUS.risk_level)}`;
                }
                console.log(`[Threat Matrix] ‚úÖ ${target} loaded (${days} days)`);
            } catch (error) {
                console.error(`[Threat Matrix] Error loading ${target}:`, error);
                document.getElementById(`${target}-combined-value`).textContent = 'Error';
            }
        }

        // ===========================================
        // COLLAPSIBLE CARD SYSTEM
        // ===========================================

        // Track which cards are expanded
        let expandedCards = new Set();

        // Toggle card expand/collapse
        function toggleCard(cardId) {
            const card = document.getElementById(cardId);
            if (!card) return;
            
            const isCurrentlyCollapsed = card.classList.contains('collapsed');
            
            if (isCurrentlyCollapsed) {
                // Expand this card
                card.classList.remove('collapsed');
                card.classList.add('expanded');
                expandedCards.add(cardId);
                
                // Update button text
                const btn = card.querySelector('.collapse-toggle-btn');
                if (btn) btn.textContent = 'Collapse ‚ñ≤';
                
                // Collapse all other cards (accordion behavior)
                collapseOtherCards(cardId);
                
                // Trigger data refresh for this card
                refreshCardData(cardId);
                
            } else {
                // Collapse this card
                card.classList.remove('expanded');
                card.classList.add('collapsed');
                expandedCards.delete(cardId);
                
                // Update button text
                const btn = card.querySelector('.collapse-toggle-btn');
                if (btn) btn.textContent = 'Expand ‚ñº';
            }
        }

        // Collapse all cards except the specified one
        function collapseOtherCards(exceptCardId) {
            const allCards = ['iran-card', 'hezbollah-card', 'houthis-card', 'syria-card'];
            
            allCards.forEach(cardId => {
                if (cardId !== exceptCardId) {
                    const card = document.getElementById(cardId);
                    if (card && card.classList.contains('expanded')) {
                        card.classList.remove('expanded');
                        card.classList.add('collapsed');
                        expandedCards.delete(cardId);
                        
                        const btn = card.querySelector('.collapse-toggle-btn');
                        if (btn) btn.textContent = 'Expand ‚ñº';
                    }
                }
            });
        }

function refreshCardData(cardId) {
    // DO NOTHING - Let user click "Scan OSINT" button manually
    // This prevents automatic scanning when expanding cards
    return;
}

// Load collapsed view data on page load
async function loadCollapsedData() {
    // Iran
    try {
        const response = await fetch(`${BACKEND_URL}/api/iran-strike-probability`);  // FIXED: Added (
        if (response.ok) {
            const data = await response.json();
            updateCollapsedView('iran', data.probability, data.last_updated);
        }
    } catch (e) {
        console.warn('Iran collapsed data failed:', e);
    }
    
    // Hezbollah
    try {
        const response = await fetch(`${BACKEND_URL}/api/hezbollah-activity`);  // FIXED: Added (
        if (response.ok) {
            const data = await response.json();
            updateCollapsedView('hezbollah', data.probability, data.last_updated);
        }
    } catch (e) {
        console.warn('Hezbollah collapsed data failed:', e);
    }
    
    // Houthis
    try {
        const response = await fetch(`${BACKEND_URL}/api/houthis-threat`);  // FIXED: Added (
        if (response.ok) {
            const data = await response.json();
            updateCollapsedView('houthis', data.probability, data.last_updated);
        }
    } catch (e) {
        console.warn('Houthis collapsed data failed:', e);
    }
    
    // Syria
    try {
        const response = await fetch(`${BACKEND_URL}/api/syria-conflict`);  // FIXED: Added (
        if (response.ok) {
            const data = await response.json();
            updateCollapsedView('syria', data.probability, data.last_updated);
        }
    } catch (e) {
        console.warn('Syria collapsed data failed:', e);
    }
}

        // Update collapsed view with data
        function updateCollapsedView(target, score, timestamp) {
            const scoreElement = document.getElementById(`${target}CollapsedScore`);
            const barElement = document.getElementById(`${target}CollapsedBar`);
            const timestampElement = document.getElementById(`${target}CollapsedTimestamp`);
            
            if (scoreElement) {
                scoreElement.textContent = `${score}%`;
            }
            
            if (barElement) {
                barElement.style.width = `${score}%`;
            }
            
            if (timestampElement && timestamp) {
                const date = new Date(timestamp);
                const formatted = date.toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                    hour: 'numeric',
                    minute: '2-digit',
                    timeZoneName: 'short'
                });
                timestampElement.textContent = `Last updated: ${formatted}`;
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            initLanguage();
            fetchRateLimitStatus();
            
            // Load collapsed card data
            loadCollapsedData();
            
            try {
                fetchPolymarketData();
                setInterval(fetchPolymarketData, 30 * 60 * 1000);
            } catch (e) {
                console.warn('Polymarket init failed:', e);
            }
            try {
                if (!window.__disableFlightCancellations) {
                    updateFlightCancellations();
                    setInterval(() => {
                        if (!window.__disableFlightCancellations) {
                            updateFlightCancellations();
                        }
                    }, 30 * 60 * 1000);
                }
            } catch (e) {
                console.warn('Flight cancellations init failed:', e);
            }
        });
    </script>
</body>
</html>
